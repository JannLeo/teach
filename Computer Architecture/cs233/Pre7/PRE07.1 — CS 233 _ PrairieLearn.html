<!DOCTYPE html>
<!-- saved from url=(0082)https://us.prairielearn.com/pl/course_instance/162445/instance_question/451052607/ -->
<html lang="en" class="fontawesome-i2svg-active fontawesome-i2svg-complete"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        
    
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="bootstrap-version" content="5">
    <meta name="cookie-domain" content=".us.prairielearn.com">
    <title> PRE07.1 â€” CS 233 |  PrairieLearn</title>
    <style type="text/css">:host,:root{--fa-font-solid:normal 900 1em/1 "Font Awesome 6 Free";--fa-font-regular:normal 400 1em/1 "Font Awesome 6 Free";--fa-font-light:normal 300 1em/1 "Font Awesome 6 Pro";--fa-font-thin:normal 100 1em/1 "Font Awesome 6 Pro";--fa-font-duotone:normal 900 1em/1 "Font Awesome 6 Duotone";--fa-font-brands:normal 400 1em/1 "Font Awesome 6 Brands";--fa-font-sharp-solid:normal 900 1em/1 "Font Awesome 6 Sharp";--fa-font-sharp-regular:normal 400 1em/1 "Font Awesome 6 Sharp";--fa-font-sharp-light:normal 300 1em/1 "Font Awesome 6 Sharp";--fa-font-sharp-thin:normal 100 1em/1 "Font Awesome 6 Sharp";--fa-font-sharp-duotone-solid:normal 900 1em/1 "Font Awesome 6 Sharp Duotone"}svg:not(:host).svg-inline--fa,svg:not(:root).svg-inline--fa{overflow:visible;box-sizing:content-box}.svg-inline--fa{display:var(--fa-display,inline-block);height:1em;overflow:visible;vertical-align:-.125em}.svg-inline--fa.fa-2xs{vertical-align:.1em}.svg-inline--fa.fa-xs{vertical-align:0}.svg-inline--fa.fa-sm{vertical-align:-.0714285705em}.svg-inline--fa.fa-lg{vertical-align:-.2em}.svg-inline--fa.fa-xl{vertical-align:-.25em}.svg-inline--fa.fa-2xl{vertical-align:-.3125em}.svg-inline--fa.fa-pull-left{margin-right:var(--fa-pull-margin,.3em);width:auto}.svg-inline--fa.fa-pull-right{margin-left:var(--fa-pull-margin,.3em);width:auto}.svg-inline--fa.fa-li{width:var(--fa-li-width,2em);top:.25em}.svg-inline--fa.fa-fw{width:var(--fa-fw-width,1.25em)}.fa-layers svg.svg-inline--fa{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0}.fa-layers-counter,.fa-layers-text{display:inline-block;position:absolute;text-align:center}.fa-layers{display:inline-block;height:1em;position:relative;text-align:center;vertical-align:-.125em;width:1em}.fa-layers svg.svg-inline--fa{transform-origin:center center}.fa-layers-text{left:50%;top:50%;transform:translate(-50%,-50%);transform-origin:center center}.fa-layers-counter{background-color:var(--fa-counter-background-color,#ff253a);border-radius:var(--fa-counter-border-radius,1em);box-sizing:border-box;color:var(--fa-inverse,#fff);line-height:var(--fa-counter-line-height,1);max-width:var(--fa-counter-max-width,5em);min-width:var(--fa-counter-min-width,1.5em);overflow:hidden;padding:var(--fa-counter-padding,.25em .5em);right:var(--fa-right,0);text-overflow:ellipsis;top:var(--fa-top,0);transform:scale(var(--fa-counter-scale,.25));transform-origin:top right}.fa-layers-bottom-right{bottom:var(--fa-bottom,0);right:var(--fa-right,0);top:auto;transform:scale(var(--fa-layers-scale,.25));transform-origin:bottom right}.fa-layers-bottom-left{bottom:var(--fa-bottom,0);left:var(--fa-left,0);right:auto;top:auto;transform:scale(var(--fa-layers-scale,.25));transform-origin:bottom left}.fa-layers-top-right{top:var(--fa-top,0);right:var(--fa-right,0);transform:scale(var(--fa-layers-scale,.25));transform-origin:top right}.fa-layers-top-left{left:var(--fa-left,0);right:auto;top:var(--fa-top,0);transform:scale(var(--fa-layers-scale,.25));transform-origin:top left}.fa-1x{font-size:1em}.fa-2x{font-size:2em}.fa-3x{font-size:3em}.fa-4x{font-size:4em}.fa-5x{font-size:5em}.fa-6x{font-size:6em}.fa-7x{font-size:7em}.fa-8x{font-size:8em}.fa-9x{font-size:9em}.fa-10x{font-size:10em}.fa-2xs{font-size:.625em;line-height:.1em;vertical-align:.225em}.fa-xs{font-size:.75em;line-height:.0833333337em;vertical-align:.125em}.fa-sm{font-size:.875em;line-height:.0714285718em;vertical-align:.0535714295em}.fa-lg{font-size:1.25em;line-height:.05em;vertical-align:-.075em}.fa-xl{font-size:1.5em;line-height:.0416666682em;vertical-align:-.125em}.fa-2xl{font-size:2em;line-height:.03125em;vertical-align:-.1875em}.fa-fw{text-align:center;width:1.25em}.fa-ul{list-style-type:none;margin-left:var(--fa-li-margin,2.5em);padding-left:0}.fa-ul>li{position:relative}.fa-li{left:calc(-1 * var(--fa-li-width,2em));position:absolute;text-align:center;width:var(--fa-li-width,2em);line-height:inherit}.fa-border{border-color:var(--fa-border-color,#eee);border-radius:var(--fa-border-radius,.1em);border-style:var(--fa-border-style,solid);border-width:var(--fa-border-width,.08em);padding:var(--fa-border-padding,.2em .25em .15em)}.fa-pull-left{float:left;margin-right:var(--fa-pull-margin,.3em)}.fa-pull-right{float:right;margin-left:var(--fa-pull-margin,.3em)}.fa-beat{animation-name:fa-beat;animation-delay:var(--fa-animation-delay,0s);animation-direction:var(--fa-animation-direction,normal);animation-duration:var(--fa-animation-duration,1s);animation-iteration-count:var(--fa-animation-iteration-count,infinite);animation-timing-function:var(--fa-animation-timing,ease-in-out)}.fa-bounce{animation-name:fa-bounce;animation-delay:var(--fa-animation-delay,0s);animation-direction:var(--fa-animation-direction,normal);animation-duration:var(--fa-animation-duration,1s);animation-iteration-count:var(--fa-animation-iteration-count,infinite);animation-timing-function:var(--fa-animation-timing,cubic-bezier(.28,.84,.42,1))}.fa-fade{animation-name:fa-fade;animation-delay:var(--fa-animation-delay,0s);animation-direction:var(--fa-animation-direction,normal);animation-duration:var(--fa-animation-duration,1s);animation-iteration-count:var(--fa-animation-iteration-count,infinite);animation-timing-function:var(--fa-animation-timing,cubic-bezier(.4,0,.6,1))}.fa-beat-fade{animation-name:fa-beat-fade;animation-delay:var(--fa-animation-delay,0s);animation-direction:var(--fa-animation-direction,normal);animation-duration:var(--fa-animation-duration,1s);animation-iteration-count:var(--fa-animation-iteration-count,infinite);animation-timing-function:var(--fa-animation-timing,cubic-bezier(.4,0,.6,1))}.fa-flip{animation-name:fa-flip;animation-delay:var(--fa-animation-delay,0s);animation-direction:var(--fa-animation-direction,normal);animation-duration:var(--fa-animation-duration,1s);animation-iteration-count:var(--fa-animation-iteration-count,infinite);animation-timing-function:var(--fa-animation-timing,ease-in-out)}.fa-shake{animation-name:fa-shake;animation-delay:var(--fa-animation-delay,0s);animation-direction:var(--fa-animation-direction,normal);animation-duration:var(--fa-animation-duration,1s);animation-iteration-count:var(--fa-animation-iteration-count,infinite);animation-timing-function:var(--fa-animation-timing,linear)}.fa-spin{animation-name:fa-spin;animation-delay:var(--fa-animation-delay,0s);animation-direction:var(--fa-animation-direction,normal);animation-duration:var(--fa-animation-duration,2s);animation-iteration-count:var(--fa-animation-iteration-count,infinite);animation-timing-function:var(--fa-animation-timing,linear)}.fa-spin-reverse{--fa-animation-direction:reverse}.fa-pulse,.fa-spin-pulse{animation-name:fa-spin;animation-direction:var(--fa-animation-direction,normal);animation-duration:var(--fa-animation-duration,1s);animation-iteration-count:var(--fa-animation-iteration-count,infinite);animation-timing-function:var(--fa-animation-timing,steps(8))}@media (prefers-reduced-motion:reduce){.fa-beat,.fa-beat-fade,.fa-bounce,.fa-fade,.fa-flip,.fa-pulse,.fa-shake,.fa-spin,.fa-spin-pulse{animation-delay:-1ms;animation-duration:1ms;animation-iteration-count:1;transition-delay:0s;transition-duration:0s}}@keyframes fa-beat{0%,90%{transform:scale(1)}45%{transform:scale(var(--fa-beat-scale,1.25))}}@keyframes fa-bounce{0%{transform:scale(1,1) translateY(0)}10%{transform:scale(var(--fa-bounce-start-scale-x,1.1),var(--fa-bounce-start-scale-y,.9)) translateY(0)}30%{transform:scale(var(--fa-bounce-jump-scale-x,.9),var(--fa-bounce-jump-scale-y,1.1)) translateY(var(--fa-bounce-height,-.5em))}50%{transform:scale(var(--fa-bounce-land-scale-x,1.05),var(--fa-bounce-land-scale-y,.95)) translateY(0)}57%{transform:scale(1,1) translateY(var(--fa-bounce-rebound,-.125em))}64%{transform:scale(1,1) translateY(0)}100%{transform:scale(1,1) translateY(0)}}@keyframes fa-fade{50%{opacity:var(--fa-fade-opacity,.4)}}@keyframes fa-beat-fade{0%,100%{opacity:var(--fa-beat-fade-opacity,.4);transform:scale(1)}50%{opacity:1;transform:scale(var(--fa-beat-fade-scale,1.125))}}@keyframes fa-flip{50%{transform:rotate3d(var(--fa-flip-x,0),var(--fa-flip-y,1),var(--fa-flip-z,0),var(--fa-flip-angle,-180deg))}}@keyframes fa-shake{0%{transform:rotate(-15deg)}4%{transform:rotate(15deg)}24%,8%{transform:rotate(-18deg)}12%,28%{transform:rotate(18deg)}16%{transform:rotate(-22deg)}20%{transform:rotate(22deg)}32%{transform:rotate(-12deg)}36%{transform:rotate(12deg)}100%,40%{transform:rotate(0)}}@keyframes fa-spin{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}.fa-rotate-90{transform:rotate(90deg)}.fa-rotate-180{transform:rotate(180deg)}.fa-rotate-270{transform:rotate(270deg)}.fa-flip-horizontal{transform:scale(-1,1)}.fa-flip-vertical{transform:scale(1,-1)}.fa-flip-both,.fa-flip-horizontal.fa-flip-vertical{transform:scale(-1,-1)}.fa-rotate-by{transform:rotate(var(--fa-rotate-angle,0))}.fa-stack{display:inline-block;vertical-align:middle;height:2em;position:relative;width:2.5em}.fa-stack-1x,.fa-stack-2x{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0;z-index:var(--fa-stack-z-index,auto)}.svg-inline--fa.fa-stack-1x{height:1em;width:1.25em}.svg-inline--fa.fa-stack-2x{height:2em;width:2.5em}.fa-inverse{color:var(--fa-inverse,#fff)}.fa-sr-only,.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}.fa-sr-only-focusable:not(:focus),.sr-only-focusable:not(:focus){position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}.svg-inline--fa .fa-primary{fill:var(--fa-primary-color,currentColor);opacity:var(--fa-primary-opacity,1)}.svg-inline--fa .fa-secondary{fill:var(--fa-secondary-color,currentColor);opacity:var(--fa-secondary-opacity,.4)}.svg-inline--fa.fa-swap-opacity .fa-primary{opacity:var(--fa-secondary-opacity,.4)}.svg-inline--fa.fa-swap-opacity .fa-secondary{opacity:var(--fa-primary-opacity,1)}.svg-inline--fa mask .fa-primary,.svg-inline--fa mask .fa-secondary{fill:#000}.fa-duotone.fa-inverse,.fad.fa-inverse{color:var(--fa-inverse,#fff)}</style><link href="./PRE07.1 â€” CS 233 _ PrairieLearn_files/bootstrap.min.css" rel="stylesheet">
    <link href="./PRE07.1 â€” CS 233 _ PrairieLearn_files/bootstrap-icons.css" rel="stylesheet">
    <link href="./PRE07.1 â€” CS 233 _ PrairieLearn_files/colors.css" rel="stylesheet">
    <link href="./PRE07.1 â€” CS 233 _ PrairieLearn_files/local.css" rel="stylesheet">
    <script src="./PRE07.1 â€” CS 233 _ PrairieLearn_files/jquery.min.js"></script>
    <script src="./PRE07.1 â€” CS 233 _ PrairieLearn_files/bootstrap.bundle.min.js"></script>
    <script src="./PRE07.1 â€” CS 233 _ PrairieLearn_files/all.min.js"></script>
    <script src="./PRE07.1 â€” CS 233 _ PrairieLearn_files/application-7LJAYBYU.js"></script> <script src="./PRE07.1 â€” CS 233 _ PrairieLearn_files/navbarClient-LLHWXHS7.js"></script>
   <script src="./PRE07.1 â€” CS 233 _ PrairieLearn_files/question-EKSL3NTZ.js"></script>
        
        <script defer="" src="./PRE07.1 â€” CS 233 _ PrairieLearn_files/startup.js"></script>
        <script>
          document.urlPrefix = '/pl/course_instance/162445';
        </script>
        
              
              <link href="./PRE07.1 â€” CS 233 _ PrairieLearn_files/pl-code.css" rel="stylesheet">
<link href="./PRE07.1 â€” CS 233 _ PrairieLearn_files/pl-checkbox.css" rel="stylesheet">

<script type="text/javascript" src="./PRE07.1 â€” CS 233 _ PrairieLearn_files/PrairieUtil.js"></script>
<script type="text/javascript" src="./PRE07.1 â€” CS 233 _ PrairieLearn_files/clipboard.min.js"></script>
            
      <script src="./PRE07.1 â€” CS 233 _ PrairieLearn_files/core.js" charset="UTF-8"></script><style>                      .htmx-indicator{opacity:0}                      .htmx-request .htmx-indicator{opacity:1; transition: opacity 200ms ease-in;}                      .htmx-request.htmx-indicator{opacity:1; transition: opacity 200ms ease-in;}                    </style><style type="text/css" id="ctre_styles">
			#ctre_wnd {
				position: fixed; bottom: 0; right: 10px;
				background: #fff; box-shadow: 0px 0px 40px rgba(0,0,0,0.15);
				border-radius: 3px 3px 0 0;
				z-index: 2147483647;
			}

			@media (prefers-color-scheme: dark) {
				#ctre_wnd { background: #000; box-shadow: 0px 0px 40px rgba(255,255,255,0.15); }
			}
			</style></head>
      <body data-new-gr-c-s-check-loaded="14.1215.0" data-gr-ext-installed="">
        
    

    <div class="container-fluid bg-primary">
      <a href="https://us.prairielearn.com/pl/course_instance/162445/instance_question/451052607/#content" class="d-inline-flex p-2 m-2 text-white visually-hidden-focusable">
        Skip to main content
      </a>
    </div>

    

    <nav class="navbar navbar-dark bg-dark navbar-expand-md" aria-label="Global navigation">
      <div class="container-fluid">
        <a class="navbar-brand" href="https://us.prairielearn.com/pl" aria-label="Homepage">
          <span class="navbar-brand-label">PrairieLearn</span>
          <span class="navbar-brand-hover-label">
            Go home <svg class="svg-inline--fa fa-angle-right" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="angle-right" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" data-fa-i2svg=""><path fill="currentColor" d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"></path></svg><!-- <i class="fa fa-angle-right" aria-hidden="true"></i> Font Awesome fontawesome.com -->
          </span>
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target=".navbar-collapse" aria-expanded="false" aria-label="Toggle navigation" data-bs-target=".navbar-collapse" data-bs-toggle="collapse">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div id="course-nav" class="collapse navbar-collapse">
          <ul class="nav navbar-nav mr-auto me-auto" id="main-nav">
            
    <li class="nav-item navbar-text mr-4 me-4">
      CS 233, Fa24
    </li>

    <li class="nav-item ">
      <a class="nav-link" href="https://us.prairielearn.com/pl/course_instance/162445/assessments">Assessments</a>
    </li>
    <li class="nav-item ">
      <a class="nav-link" href="https://us.prairielearn.com/pl/course_instance/162445/gradebook">Gradebook</a>
    </li>

    
          <li class="nav-item ">
            <a class="nav-link" href="https://us.prairielearn.com/pl/course_instance/162445/assessment_instance/9118087">
              PRE07
            </a>
          </li>
        
  
          </ul>

          
          
    <ul class="nav navbar-nav" id="username-nav" data-access-as-administrator="false" data-view-type="student" data-authn-course-role="None" data-authn-course-instance-role="None" data-has-instructor-access="">
      <li class="nav-item dropdown mb-2 mb-md-0 mr-2 me-2">
        <button class="btn nav-link dropdown-toggle" id="navbarDropdown" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" data-bs-toggle="dropdown">
          Che Liu
          
        </button>
        <div class="dropdown-menu dropdown-menu-right dropdown-menu-end" aria-labelledby="navbarDropdown">
          
           
          
          
                <a class="dropdown-item" href="https://us.prairielearn.com/pl/request_course">
                  Course Requests
                </a>
              
          <a class="dropdown-item" href="https://us.prairielearn.com/pl/settings">Settings</a>
          <a class="dropdown-item news-item-link" href="https://us.prairielearn.com/pl/course_instance/162445/news_items" title="News" aria-label="News">
            News
            
          </a>

          <a class="dropdown-item" href="https://us.prairielearn.com/pl/logout">Log out</a>
        </div>
      </li>
    </ul>
  
        </div>
      </div>
    </nav>

    
     
    <div class="mb-3">
      
    </div>
  
  
        
        <main id="content" class="container">
          
          <div class="row">
            <div class="col-lg-9 col-sm-12">
              
    <div class="question-container" data-grading-method="Internal" data-variant-id="112038053" data-question-id="9127018" data-instance-question-id="451052607" data-user-id="4502939" data-variant-token="NTBiN2NiMTM2MjFhMDFlNWZlMmIwOWM2ZTU4ODU5NGI1ZmU5MTE2ODZjN2RmMDgwYzQ2Y2I3Y2IxM2Q0N2ZhOQ.m56ajfwn.eyJ2YXJpYW50SWQiOiIxMTIwMzgwNTMifQ" data-url-prefix="/pl/course_instance/162445" data-question-context="student_homework" data-csrf-token="YWE4Nzk1NGQwNGY1MzhkN2Y0ZDNjZWFkZGZmYzQ2OTI4MjRkNDJjOWYwZWIxYmY4ZGI3NTY3Y2Y0MTRiOTM3OA.m56ajfte.eyJ1cmwiOiIvcGwvY291cnNlX2luc3RhbmNlLzE2MjQ0NS9pbnN0YW5jZV9xdWVzdGlvbi80NTEwNTI2MDcvIiwiYXV0aG5fdXNlcl9pZCI6IjQ1MDI5MzkifQ" data-authorized-edit="true">
      
      
      
            <form class="question-form" name="question-form" method="POST" autocomplete="off" data-original-form-data="__variant_id=112038053">
              
    <div class="card mb-4 question-block">
      <div class="card-header bg-primary text-white d-flex align-items-center">
        <h1>
          PRE07.1. 07 Text and Videos
        </h1>
        
      </div>
      <div class="card-body question-body">
<h2>Videos</h2>
<iframe id="kmsembed-1_h0z03dxj" style="width:25vh" src="./PRE07.1 â€” CS 233 _ PrairieLearn_files/26883701.html" class="kmsembed" allowfullscreen="" webkitallowfullscreen="" mozallowfullscreen="" allow="autoplay *; fullscreen *; encrypted-media *" sandbox="allow-forms allow-same-origin allow-scripts allow-top-navigation allow-pointer-lock allow-popups allow-modals allow-orientation-lock allow-popups-to-escape-sandbox allow-presentation allow-top-navigation-by-user-activation" frameborder="0" title="Kaltura Player"></iframe>
<iframe id="kmsembed-1_jufl7c73" style="width:25vh" src="./PRE07.1 â€” CS 233 _ PrairieLearn_files/26883701(1).html" class="kmsembed" allowfullscreen="" webkitallowfullscreen="" mozallowfullscreen="" allow="autoplay *; fullscreen *; encrypted-media *" sandbox="allow-forms allow-same-origin allow-scripts allow-top-navigation allow-pointer-lock allow-popups allow-modals allow-orientation-lock allow-popups-to-escape-sandbox allow-presentation allow-top-navigation-by-user-activation" frameborder="0" title="Kaltura Player"></iframe>
<iframe id="kmsembed-1_qsblz6oc" style="width:25vh" src="./PRE07.1 â€” CS 233 _ PrairieLearn_files/26883701(2).html" class="kmsembed" allowfullscreen="" webkitallowfullscreen="" mozallowfullscreen="" allow="autoplay *; fullscreen *; encrypted-media *" sandbox="allow-forms allow-same-origin allow-scripts allow-top-navigation allow-pointer-lock allow-popups allow-modals allow-orientation-lock allow-popups-to-escape-sandbox allow-presentation allow-top-navigation-by-user-activation" frameborder="0" title="Kaltura Player"></iframe>
<iframe id="kmsembed-1_9tpjghk8" style="width:25vh" src="./PRE07.1 â€” CS 233 _ PrairieLearn_files/26883701(3).html" class="kmsembed" allowfullscreen="" webkitallowfullscreen="" mozallowfullscreen="" allow="autoplay *; fullscreen *; encrypted-media *" sandbox="allow-forms allow-same-origin allow-scripts allow-top-navigation allow-pointer-lock allow-popups allow-modals allow-orientation-lock allow-popups-to-escape-sandbox allow-presentation allow-top-navigation-by-user-activation" frameborder="0" title="Kaltura Player"></iframe>
<iframe id="kmsembed-1_ghsfqumy" style="width:25vh" src="./PRE07.1 â€” CS 233 _ PrairieLearn_files/26883701(4).html" class="kmsembed" allowfullscreen="" webkitallowfullscreen="" mozallowfullscreen="" allow="autoplay *; fullscreen *; encrypted-media *" sandbox="allow-forms allow-same-origin allow-scripts allow-top-navigation allow-pointer-lock allow-popups allow-modals allow-orientation-lock allow-popups-to-escape-sandbox allow-presentation allow-top-navigation-by-user-activation" frameborder="0" title="Kaltura Player"></iframe>
<p>Video credits: Geoffrey Herman, Text credits: Geoffrey Herman</p>

<h2>The Big Picture</h2>
<p>We are combining everything from the first 5 classes (logic gates, binary codes, arithmetic logic units, FSMs, and register files) together to build a programmable computer architecture. We will teach you about the MIPS Instruction Set Architecture (ISA), which shares the same core design philosophy as modern architectures such as ARM and RISC-V. Everything you learn about MIPS should directly transfer to these other ISAs. MIPS was the processor used in systems like the Nintendo 64, Sony PlayStation2 and in many consumer electronics like network routers, cameras, and printers as well as supercomputers in the 1990s.</p>

<p>Our register file stores <span style="color:#ff0000;">data</span> as state, locating <span style="color:#00aa00;">where</span> that data is stored with <span style="color:#00aa00;">addresses</span>. Our ALU manipulates state based on <span style="color:#0000ff;">control</span> bits it receives. By combining a register file and ALU, we can create a flexibly programmable datapath called the arithmetic machine.</p>

<p>This machine implements arithmetic and bitwise logical operations on instructions such as <code>x = y + z;</code> or <code>a = b | c;</code>. <code>y</code>, <code>z</code>, <code>b</code>, and <code>c</code> would be sources that we read from our register file (two at a time). <code>x</code> and <code>a</code> would be destinations that we write to in our register file (only one at a time). The ALU would control whether we perform addition, bitwise OR, or some other operation.</p>

<p>Programs (i.e., a set of instructions) for this arithmetic machine can be written in assembly code that we can convert into machine code binary <span style="color:#ff0000;">data</span>. This machine code is stored in the instruction memory. The instruction memory is conceptually a large register file that stores billions of Bytes rather than thousands of bits, so that we can store large programs. The Program Counter stores an <span style="color:#00aa00;">address</span> that tells us <span style="color:#00aa00;">where</span> our current instruction is stored in the instruction memory. We can decode these instructions into binary <span style="color:#0000ff;">control</span> bits using the MIPS instruction decoder.</p>


<p>Supplemental Optional Reading: </p><ul><li>Mano &amp; Kime 4th Ed., 9.1, 9.2, and 9.3</li><li>Patterson &amp; Hennessy 5.3</li></ul><p></p>

<h2>Instruction Set Architectures</h2>
<p>An Instruction Set Architecture (ISA) specifies what operations (or instructions) a processor can perform. An ISA ensures code binary compatibility: all code compiled for a specific ISA will result in the same binary machine code. This machine code should be able to run on any processor from that ISA family regardless of implementation. For example, a program compiled for the x86 ISA should run properly whether the processor chip was designed/manufactured by Intel or AMD. We will teach you the MIPS ISA.</p>

<h2>MIPS ALU (Our Implementation)</h2>
<p>The MIPS ISA specifies that an implementation of the ISA must be able to perform 32-bit arithmetic operations (e.g., addition, subtraction, multiplication, and division), bitwise logical operations (e.g., bitwise AND, OR, NOR, XOR), and bit shifting operations. It does not specify how these operations must be implemented.</p>

<p>We will not implement every operation in the the MIPS ISA, because that adds complexity without more clarity. We will implement only ADD, SUB, AND, OR, NOR, and XOR so that we can use the ALU we had you build in Lab 2.</p>

<div class="container">
  <div class="row">
    <div class="col-sm-6">
<div class="container-fluid">
    <img src="./PRE07.1 â€” CS 233 _ PrairieLearn_files/32bit_alu_schematic.png" width="350" alt="" class="img-fluid mx-auto d-block">
</div>
    </div>
    <div class="col-sm-6">
<table class="table-striped table-bordered truth-table">
    <thead>
        <tr>
            <th style="color:Blue">control[2:0]</th>
            <th style="color:Red">out</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>000</td>
            <td>undefined</td>
        </tr>
        <tr>
            <td>001</td>
            <td>undefined</td>
        </tr>
        <tr>
            <td>010</td>
            <td>A + B</td>
        </tr>
        <tr>
            <td>011</td>
            <td>A - B</td>
        </tr>
        <tr>
            <td>100</td>
            <td>A AND B</td>
        </tr>
        <tr>
            <td>101</td>
            <td>A OR B</td>
        </tr>
        <tr>
            <td>110</td>
            <td>A NOR B</td>
        </tr>
        <tr>
            <td>111</td>
            <td>A XOR B</td>
        </tr>
    </tbody>
</table>
    </div>
  </div>
</div>

<h2>MIPS register file</h2>
<p>The MIPS ISA specifies the following features of the MIPS register file. This is the register file you implemented in Lab 3.</p>

<div class="container-fluid">
    <img src="./PRE07.1 â€” CS 233 _ PrairieLearn_files/register_file.png" alt="" class="img-fluid mx-auto d-block">
</div>

<ul>
    <li>It is a 2<sup><span style="color:#00aa00;">5</span></sup>x<span style="color:#ff0000;">32</span> register file (32 registers each storing 32 bits) that has two read ports and one write port.</li>
    <li>MIPS registers are syntactically indicated with a <code>$</code>. For example, <code>$4</code> is read as "Register 4", <code>$31</code> is read as "Register 31."</li>
    <li>MIPS registers are <span style="color:#00aa00;">addressed</span> using 5-bit unsigned binary numbers. For example, Register 9 (<code>$9</code>) would have address 01001.</li>
    <li>The register file is represented with variable <code>R</code>. Registers are dereferenced using brackets and without the <code>$</code>. For example, the data stored in register 9 would be <code>R[9]</code>, the data to be stored in register 31 after the next clock edge would be <code>R[31]=...</code></li>
    <li><code>$0</code> is not an actual register but is instead 32 wires connected to ground, so that <code>R[0]</code> is always 0. Writes to <code>$0</code> are ignored.</li>
</ul>

<h2>The Arithmetic Machine</h2>
<p>We combine the register file and ALU to create the core of a MIPS processor called the arithmetic machine. The arithmetic machine performs one arithmetic or logic operation per clock cycle. These arithmetic and logic instruction are generally performed in a single clock cycle by the arithmetic machine: state data is read from the register file, the state data is manipulated by the ALU, and then sent back to the register file just before the next positive clock so that the result can be written to a register.</p>

<div class="container-fluid">
    <img src="./PRE07.1 â€” CS 233 _ PrairieLearn_files/arithmetic_machine_base.png" alt="" class="img-fluid mx-auto d-block">
</div>

<p>The ISA specifies the name of three registers as address variables for the arithmetic machine: <code style="color:#00aa00;">rs</code>, <code style="color:#00aa00;">rt</code>, and <code style="color:#00aa00;">rd</code>. For example we might use <code style="color:#00aa00;">rs</code> and <code style="color:#00aa00;">rt</code> to indicate <span style="color:#00aa00;">where</span> we want to read from and <code style="color:#00aa00;">rd</code> to indicate <span style="color:#00aa00;">where</span> we want to write to.</p>

<p>Since we designed the ALU, we determine how to <span style="color:#0000ff;">control</span> the datapath. We decide both what <span style="color:#0000ff;">control</span> signals to include in the datapath (<code style="color:#0000ff;">alu_op[2:0]</code> and <code style="color:#0000ff;">W_enable</code>) and what values they should have.</p>

<h2>MIPS machine code</h2>
<p>MIPS is a 32-bit system, where every machine code instruction is encoded in 32 bits. Every machine code instruction can do one fundamental operation such as add two numbers (e.g., <code>00000001011011000010100000100000</code>) or perform a bitwise OR (e.g., <code>00110100011001011010101010101010</code>) on two numbers. </p>

<p>Machine code is designed so that it can be parsed into a series of smaller bit fields. We will teach you about three ways that MIPS machine code can be parsed: R-, I-, and J-type. For example, the add machine code instruction above would be parsed using the R-type format <code style="color:#0000ff;">000000</code> <code style="color:#00aa00;">01011</code> <code style="color:#00aa00;">01100</code> <code style="color:#00aa00;">00101</code> <code style="color:#ff0000;">00000</code> <code style="color:#0000ff;">100000</code> and the bitwise OR instruction using the I-type format <code style="color:#0000ff;">001101</code> <code style="color:#00aa00;">00011</code> <code style="color:#00aa00;">00101</code> <code style="color:#ff0000;">1010101010101010</code>.</p>

<div class="container-fluid">
    <img src="./PRE07.1 â€” CS 233 _ PrairieLearn_files/instruction_formats.png" alt="" class="img-fluid mx-auto d-block">
</div>

<ul>
    <li><span style="color:#0000ff;"><strong>opcode</strong></span> (operation code): 6-bit field. Specificies which operation the operation or instruction should perform (e.g., addition or bitwise OR).</li>
    <li><span style="color:#00aa00;"><strong>rs</strong></span>: 5-bit field. Interpreted as a 5-bit unsigned binary number, which becomes an address for the register file. Specifies which register to read from. r<strong>s</strong> is always a <strong>s</strong>ource (i.e., where we read from).</li>
    <li><span style="color:#00aa00;"><strong>rt</strong></span>: 5-bit field. Interpreted as a 5-bit unsigned binary number, which becomes an address for the register file. Can be used to specify which register to read from or write to. r<strong>t</strong> can <strong>t</strong>ransition between being a source and a destination (i.e., where we write to).</li>
    <li><span style="color:#00aa00;"><strong>rd</strong></span>: 5-bit field. Interpreted as a 5-bit unsigned binary number, which becomes an address for the register file. Specifies which register to write to. r<strong>d</strong> is always a <strong>d</strong>estination.</li>
    <li><span style="color:#ff0000;"><strong>shamt</strong></span> (<strong>SH</strong>ift <strong>AM</strong>oun<strong>T</strong>): 5-bit field. Interpreted as a 5-bit unsigned binary number. Specifies how much to shift a register by (i.e., up to 32 bits to the left or right).</li>
    <li><span style="color:#0000ff;"><strong>funct</strong></span> (function code): 6-bit field. Complements opcode to allow the specification of more operations or instructions that can performed.</li>
    <li><span style="color:#ff0000;"><strong>immediate</strong></span>: 16-bit field. Used as a 16-bit constant (in unsigned or 2's complement depending on the instruction). Called an immediate, because the constant is immediately available without needing to be dereferenced from the register file.</li>
    <li><span style="color:#00aa00;"><strong>address</strong></span>: 26-bit field. Used to construct a 32-bit instruction memory address. More on that in future classes</li>
</ul>

<div class="alert alert-info" role="alert">
Because rs, rt, and rd are 5-bit address fields for the register file, so we know that the register file must have 2<sup>5</sup>=32 registers.
</div>

<p>These binary fields can be translated into assembly code using a lookup table (discussed later).</p>

<h2>MIPS assembly code</h2>

<p>Assembly code is essentially the human readable equivalent of machine code, where one line of assembly code roughly translates to 32 bits of machine code (we will discuss exceptions later). For example, the 32-bit MIPS machine code 00000001011011000010100000100000 would correspond to the MIPS assembly code instruction <code style="color:#0000ff;">add</code> <code style="color:#00aa00;">$5</code>, <code style="color:#00aa00;">$11</code>, <code style="color:#00aa00;">$12</code>.</p>

<p>MIPS assembly instructions generally take the form of a mnemonic (e.g., <code style="color:#0000ff;">add</code>, <code style="color:#0000ff;">sub</code>, or <code style="color:#0000ff;">ori</code>) followed by operators such as register numbers (e.g., <code style="color:#00aa00;">$4</code> or <code style="color:#00aa00;">$29</code>) or constants (e.g., an immediate such as <code style="color:#ff0000;">29</code> or a shift amount such as <code style="color:#ff0000;">4</code>).</p>

<div class="alert alert-info" role="alert">
Register numbers have a <code>$</code> in front of them. Constants do not.
</div>

<p>All MIPS instructions follow the pattern of reading state from a memory device, manipulating that state in some way, and then storing a new state into a memory device.</p>

<style>
  .truth-table {
    text-align: center;
    margin-bottom: 1rem;
    margin: 0 auto;
    width: auto;
  }
  .truth-table tr {
    height: 35px;
    padding: 0px 0px 0px 0px;
    margin: 0px;
  }
  .truth-table th, .truth-table td {
    text-align: center;
    vertical-align:middle;
    padding: 0px 5px 0px 5px;
    margin: 0px;
  }
</style>
<h2>R-type Arithmetic/Logic Instruction Format</h2>
<p>All R-type instructions have the following 32-bit machine code format.</p>

<div class="container-fluid">
    <img src="./PRE07.1 â€” CS 233 _ PrairieLearn_files/R-type.png" alt="" class="img-fluid mx-auto d-block">
</div>

<p>R-type MIPS instructions that perform arithmetic or logical operations read from two registers (sources: <code style="color:#00aa00;">rs</code> and <code style="color:#00aa00;">rt</code>), perform an arithmetic or logical operation on the content of those two registers, and then write to one register (destination <code style="color:#00aa00;">rd</code>). Register numbers are read as 5-bit unsigned binary values.</p>

<p>The arithmetic/logical R-type assembly code instructions will use the format of <span style="color:#0000ff">mnemonic</span> <span style="color:#00aa00">destination</span>, <span style="color:#00aa00">source 1</span>, <span style="color:#00aa00">source 2</span>.</p>

<table>
<tbody><tr><td style="color:#0000ff">mnemonic&nbsp;&nbsp;&nbsp;</td><td style="color:#00aa00">destination&nbsp;&nbsp;&nbsp;</td><td colspan="2" style="color:#00aa00">sources</td>
</tr><tr><td style="color:#0000ff; text-align:right;">add</td><td style="color:#00aa00; text-align:center;">$rd,</td><td style="color:#00aa00; text-align:left;">$rs,</td><td style="color:#00aa00">$rt</td></tr>
<tr><td style="color:#0000ff; text-align:right;">or</td><td style="color:#00aa00; text-align:center;">$rd,</td><td style="color:#00aa00; text-align:left;">$rs,</td><td style="color:#00aa00">$rt</td></tr>
</tbody></table>

<p>To translate MIPS assembly code to machine code, we use our knowledge of how the assembly code is formatted, how machine code is parsed, and look-up tables like the partial table from the MIPS Reference Guide shown below. The footnote indicates that the <code>add</code> instruction can result in overflow, but the <code>or</code> instruction cannot.</p>

<table style="border-collapse: collapse; width: 96.6667%;" border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <th style="vertical-align: middle; text-align: left;" scope="col">Name</th>
            <th style="vertical-align: middle; text-align: left;" scope="col">Mnemonic</th>
            <th style="vertical-align: middle; text-align: left;" scope="col">Assembly Format</th>
            <th style="vertical-align: middle; text-align: left;" scope="col">Operation (In Verilog)</th>
            <th style="vertical-align: middle; text-align: left;" scope="col">Format/<br>Notes</th>
            <th style="vertical-align: middle; text-align: left;" scope="col">Opcode/<br>Funct</th>
        </tr>
        <tr>
            <td style="vertical-align: middle;">Add</td>
            <td style="vertical-align: middle;"><code class="mips">add</code></td>
            <td style="vertical-align: middle;"><code class="mips">add $rd, $rs, $rt</code></td>
            <td style="vertical-align: middle;"><code class="mips">R[rd]=R[rs]+R[rt];</code> <code class="mips">PC=PC+4</code></td>
            <td style="vertical-align: middle;">R / (1)</td>
            <td style="vertical-align: middle;">0 / 20<sub>hex</sub></td>
        </tr>
        <tr>
            <td style="vertical-align: middle;">Or</td>
            <td style="vertical-align: middle;"><code class="mips">or</code></td>
            <td style="vertical-align: middle;"><code class="mips">or $rd, $rs, $rt</code></td>
            <td style="vertical-align: middle;"><code class="mips">R[rd]=R[rs] | R[rt];</code> <code class="mips">PC=PC+4</code></td>
            <td style="vertical-align: middle;">R</td>
            <td style="vertical-align: middle;">0 / 25<sub>hex</sub></td>
        </tr>
    </tbody>
</table>
<ol>
    <li>May cause overflow exception</li>
</ol>

<h4>R-type opcode/funct code lookup</h4>
<p>All of the the arithmetic/logical R-type instructions that we implement have opcode <code>0x00</code> and are differentiated only by their funct code (e.g., <code>add</code> has funct code <code>0x20</code> and <code>or</code> has funct code <code>0x25</code>. Some R-type instructions we will discuss later do not have opcode <code>0x00</code>. If two numbers are listed in the look-up table under Opcode/Funct, the first number is the opcode, the second is the funct code. Since both fields are only 6 bits but the hex digits correspond to 4 bits each, we are interested in only the 6 least-significant bits of the hexadecimal representation. For example, 0x20 is 0010 0000, but we use only 10 0000 for the funct code. Likewise 0x25 is 0010 0101, but we use only 10 0101.</p>

<h4>R-type register number conversion</h4>
<p>To convert assembly code register numbers to machine code binary, we match up the register number fields across the two formats and then convert the decimal numbers to 5-bit unsigned binary representation.</p>

<div class="alert alert-info" role="alert">
Careful! The ordering of registers in the machine code and the assembly code are different. Assembly code instructions are formatted such that we assign to the register on the left (i.e., <code style="color:#00aa00">rd</code>) just like how we assign to the variable to the left of an "=" in C code (i.e., we assign to <code>x</code> in <code>x = y + z;</code>). Machine code is formatted to make the physical wiring of circuits easier.</div>

<h4>R-type shamt field</h4>
<p>The <span style="color:#ff0000">shamt</span> field is used for shift instructions such as <code style="color:#0000ff">sll</code> (shift left logical) and <code style="color:#0000ff">sra</code> (shift right arithmetic). A line of C code such as <code>x = y &lt;&lt; 5</code> or <code>x = y &gt;&gt; 2</code> might correspond to assembly code like <code style="color:#0000ff">sll</code> <code style="color:#00aa00">$5</code>, <code style="color:#00aa00">$3</code>, <code style="color:#ff0000">5</code> or <code style="color:#0000ff">sra</code> <code style="color:#00aa00">$5</code>, <code style="color:#00aa00">$3</code>, <code style="color:#ff0000">2</code> respectively, where <code>x</code> maps to <code style="color:#00aa00">$5</code> and <code>y</code> maps to <code style="color:#00aa00">$3</code>.</p>  

<p>For non-shift instructions, the <span style="color:#ff0000">shamt</span> field is set to 5-bit unsigned binary 0 (i.e., 00000).</p>

<h4>R-type conversion examples</h4>
<p>Following are two examples of how to convert assembly instructions to machine code.</p>

<div class="container">
  <div class="row">
    <div class="col-sm-6">
<p style="text-align:center;"><code style="color:#0000ff">add</code> <code style="color:#00aa00">$5</code>, <code style="color:#00aa00">$11</code>, <code style="color:#00aa00">$12</code></p>
<ul>
    <li>Convert the mnemonic into <span style="color:#0000ff">opcode=000000</span> and <span style="color:#0000ff">funct=100000</span> using the lookup table</li>
    <li>Convert the registers: <code style="color:#00aa00">rs=01011</code>, <code style="color:#00aa00">rt = 01100</code>, and <code style="color:#00aa00">rd=00101</code></li>
    <li>Not a shift instruction, so set <code style="color:#ff0000">shamt=00000</code></li>
    <li>Combine the fields to get machine code</li>
</ul>
<table>
    <tbody><tr><td style="text-align:center; color:#0000ff;">opcode</td> <td style="text-align:center; color:#00aa00;">rs</td> <td style="text-align:center; color:#00aa00;">rt</td> <td style="text-align:center; color:#00aa00;">rd</td> <td style="text-align:center; color:#ff0000;">shamt</td> <td style="text-align:center; color:#0000ff;">funct</td></tr>
    <tr><td style="color:#0000ff;">000000</td> <td style="color:#00aa00;">01011</td> <td style="color:#00aa00;">01100</td> <td style="color:#00aa00;">00101</td> <td style="color:#ff0000;">00000</td> <td style="color:#0000ff;">100000</td></tr>
</tbody></table>
   </div>
    <div class="col-sm-6">
<p style="text-align:center;"><code style="color:#0000ff">or</code> <code style="color:#00aa00">$21</code>, <code style="color:#00aa00">$3</code>, <code style="color:#00aa00">$5</code></p>
<ul>
    <li>Convert the mnemonic into <span style="color:#0000ff">opcode=000000</span> and <span style="color:#0000ff">funct=100101</span> using the lookup table</li>
    <li>Convert the registers: <code style="color:#00aa00">rs=00011</code>, <code style="color:#00aa00">rt = 00101</code>, and <code style="color:#00aa00">rd=10101</code></li>
    <li>Not a shift instruction, so set <code style="color:#ff0000">shamt=00000</code></li>
    <li>Combine the fields to get machine code</li>
</ul>
<table>
    <tbody><tr><td style="text-align:center; color:#0000ff;">opcode</td> <td style="text-align:center; color:#00aa00;">rs</td> <td style="text-align:center; color:#00aa00;">rt</td> <td style="text-align:center; color:#00aa00;">rd</td> <td style="text-align:center; color:#ff0000;">shamt</td> <td style="text-align:center; color:#0000ff;">funct</td></tr>
    <tr><td style="color:#0000ff;">000000</td> <td style="color:#00aa00;">00011</td> <td style="color:#00aa00;">00101</td> <td style="color:#00aa00;">10101</td> <td style="color:#ff0000;">00000</td> <td style="color:#0000ff;">100101</td></tr>
</tbody></table>
    </div>
  </div>
</div>

<h4>R-type Instructions and the Arithmetic Machine</h4>
<p>Following are two examples to illustrate how R-type instructions propogate on the arithmetic machine datapath. On the top-left of the figure is an example piece of C code where we indicate which register each variable is mapped to in our assembly code. On the top-right is some MIPS assembly code that could implement the desired C code. On the bottom right is the MIPS arithmetic machine annotated to show the value on each bus of the system during the clock cycle that the assembly instruction is running. On the bottom-right are two tables that represent the contents of the register file. The left table illustrates the current state of the register file during the clock cycle. The register that will be overwritten after the next positive clock edge is crossed out. The right table illustrates what the next state of the register file will be after the next positive clock edge (hence the <sup>+</sup>).</p>

<p>Notes</p>
<ul>
    <li>The <span style="color:#ff0000;">data</span> that comes out of the register file read ports is determined by the <span style="color:#00aa00;">addresses</span> indicated by the assembly instruction and the current state contents of the register file.</li>
    <li>The <span style="color:#0000ff;">control</span> signal <code style="color:#0000ff;">alu_op[2:0]</code> is determined ALU behavior table. For example, we decide to use 010 for add because 010 will make the ALU perform the addition operation.</li> 
    <li>The <span style="color:#0000ff;">control</span> signal <code style="color:#0000ff;">W_enable</code> is 1 in both examples because we do want to assign a new value to the register file. There may be situations where we don't want to write to the register file (e.g., C code like <code>if(x == y)</code> just compares values and does not assign).</li>
    <li>The <span style="color:#ff0000;">data</span> row of the register file that gets crossed out is determined by the <span style="color:#00aa00;">address</span> indicated by the assembly instruction.</li>
    <li>The output of the ALU is sent to the write <span style="color:#ff0000;">data</span> part of the register file, which is why the same value is seen coming out of the ALU and going into the write port. This becomes the new <span style="color:#ff0000;">data</span> value of the destination register after the positive clock edge.</li>
    <li>The register does not actually cross out values during the clock cycle, we did that just to help you see what is happening</li>

<p></p><div class="container-fluid">
    <img src="./PRE07.1 â€” CS 233 _ PrairieLearn_files/datapath_annotated1.png" alt="" class="img-fluid mx-auto d-block">
</div><p></p>

<p></p><div class="container-fluid">
    <img src="./PRE07.1 â€” CS 233 _ PrairieLearn_files/datapath_annotated2.png" alt="" class="img-fluid mx-auto d-block">
</div><p></p>

</ul>
<h2>I-type Arithmetic/Logic Instruction Format</h2>
<p>All I-type instructions have the following 32-bit machine code format.</p>

<div class="container-fluid">
    <img src="./PRE07.1 â€” CS 233 _ PrairieLearn_files/I-type.png" alt="" class="img-fluid mx-auto d-block">
</div>

<p>I-type MIPS instructions that perform arithmetic or logical operations read from one register (source: <code style="color:#00aa00;">rs</code>) and an immediate constant value (<code style="color:#ff0000;">imm</code>), perform an arithmetic or logical operation on the content of those two registers, and then write to one register (destination <code style="color:#00aa00;">rt</code>). Register numbers are read as 5-bit unsigned binary values.</p>

<p>The arithmetic/logical I-type assembly code instructions will use the format of <span style="color:#0000ff">mnemonic</span> <span style="color:#00aa00">destination</span>, <span style="color:#00aa00">register source</span>, <span style="color:#ff0000">immediate source</span>.</p>

<table>
<tbody><tr><td style="color:#0000ff">mnemonic&nbsp;&nbsp;&nbsp;</td><td style="color:#00aa00">dest&nbsp;&nbsp;&nbsp;</td><td style="color:#00aa00">src</td><td style="color:#ff0000">immediate</td>
</tr><tr><td style="color:#0000ff; text-align:right;">addi</td><td style="color:#00aa00; text-align:center;">$rt,</td><td style="color:#00aa00; text-align:left;">$rs,</td><td style="color:#ff0000">imm</td></tr>
<tr><td style="color:#0000ff; text-align:right;">ori</td><td style="color:#00aa00; text-align:center;">$rd,</td><td style="color:#00aa00; text-align:left;">$rs,</td><td style="color:#ff0000">imm</td></tr>
</tbody></table>

<p>To translate MIPS assembly code to machine code, we use our knowledge of how the assembly code is formatted, how machine code is parsed, and look-up tables like the partial table from the MIPS Reference Guide shown below.</p>

<table style="border-collapse: collapse; width: 96.6667%;" border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <th style="vertical-align: middle; text-align: left;" scope="col">Name</th>
            <th style="vertical-align: middle; text-align: left;" scope="col">Mnemonic</th>
            <th style="vertical-align: middle; text-align: left;" scope="col">Assembly Format</th>
            <th style="vertical-align: middle; text-align: left;" scope="col">Operation (In Verilog)</th>
            <th style="vertical-align: middle; text-align: left;" scope="col">Format/<br>Notes</th>
            <th style="vertical-align: middle; text-align: left;" scope="col">Opcode/<br>Funct</th>
        </tr>
        <tr style="height: 28px;">
            <td style="vertical-align: middle;">Add Immediate</td>
            <td style="vertical-align: middle;"><code class="mips">addi</code></td>
            <td style="vertical-align: middle;"><code class="mips">addi $rt, $rs, imm</code></td>
            <td style="vertical-align: middle;"><code class="mips">R[rt]=R[rs] + SignExtImm;</code> <code class="mips">PC=PC+4</code></td>
            <td style="vertical-align: middle;">I / (1,2)</td>
            <td style="vertical-align: middle;">8<sub>hex</sub></td>
        </tr>
        <tr>
            <td style="vertical-align: middle;">Or Immediate</td>
            <td style="vertical-align: middle;"><code class="mips">ori</code></td>
            <td style="vertical-align: middle;"><code class="mips">ori $rt, $rs, imm</code></td>
            <td style="vertical-align: middle;"><code class="mips">R[rt]=R[rs] | ZeroExtImm;</code> <code class="mips">PC=PC+4</code></td>
            <td style="vertical-align: middle;">I / (3)</td>
            <td style="vertical-align: middle;">d<sub>hex</sub></td>
        </tr>
    </tbody>
</table>
<ol>
    <li>May cause overflow exception</li>
    <li><code class="mips">SignExtImm = { {16{inst[15]}}, inst[15:0] }</code></li>
    <li><code class="mips">ZeroExtImm = { {16{1'b0}}, inst[15:0] }</code></li>
</ol>

<h4>I-type opcode lookup</h4>

<p>All I-type instructions have different opcodes (e.g., <code>addi</code> has opcode <code>0x08</code> and <code>ori</code> has opcode <code>0x0d</code>. If only one number is listed under Opcode/Funct, that number is the opcode. Since the opcode field is 6 bits but hex digits are a multiple of 4 bits, we are interested in only the 6 least-significant bits of the hexadecimal representation or we zero-extend the hexadecimal representation to 6 bits. For example, 0x08 is 00 1000 and  0xd is 00 1101.</p>

<h4>I-type register number conversion</h4>
<p>To convert assembly code register numbers to machine code binary, we match up the register number fields across the two formats and then convert the decimal numbers to 5-bit unsigned binary representation.</p>

<div class="alert alert-info" role="alert">
Careful! The ordering of registers in the machine code and the assembly code are different. Assembly code instructions are formatted such that we assign to the register on the left (i.e., <code style="color:#00aa00">rd</code>) just like how we assign to the variable to the left of an "=" in C code (i.e., we assign to <code>x</code> in <code>x = y + 1;</code>). Machine code is formatted to make the physical wiring of circuits easier.</div>

<h4>I-type immediate field</h4>
<p>The <span style="color:#ff0000">immediate</span> field is 16-bit constant. For arithmetic instructions, the immediate field is treated as a signed or 16-bit 2's complement represented number, so we need to sign extend the immediate to become a 32-bit 2's complement represented number before we can before arithmetic operations with it (see footnote 2 in the table above). For logical instructions, the immediate field is treated as an unsigned 16-bit number, so we need to zero extend the immediate to become a 32-bit unsigned binary number before we perform logical operations with it (see footnote 3 in the table below).</p>

<p>We will discuss how to construct immediate constants bigger than 16 bits later if you need them.</p>

<h4>I-type conversion examples</h4>
<p>Following are two examples of how to convert assembly instructions to machine code.</p>

<div class="container">
  <div class="row">
    <div class="col-sm-6">
<p style="text-align:center;"><code style="color:#0000ff">addi</code> <code style="color:#00aa00">$5</code>, <code style="color:#00aa00">$11</code>, <code style="color:#ff0000">12</code></p>
<ul>
    <li>Convert the mnemonic using the lookup table: <span style="color:#0000ff">opcode=001000</span></li>
    <li>Convert the registers: <code style="color:#00aa00">rs=01011</code> and <code style="color:#00aa00">rt = 00101</code></li>
    <li>Convert the immediate: <code style="color:#ff0000">imm=0000 0000 0000 1100</code></li>
    <li>Combine the fields to get machine code</li>
</ul>
<table>
    <tbody><tr><td style="text-align:center; color:#0000ff;">opcode</td> <td style="text-align:center; color:#00aa00;">rs</td> <td style="text-align:center; color:#00aa00;">rt</td> <td style="text-align:center; color:#ff0000;">immediate</td></tr>
    <tr><td style="color:#0000ff;">001000</td> <td style="color:#00aa00;">01011</td> <td style="color:#00aa00;">00101</td> <td style="color:#ff0000;">0000000000001100</td></tr>
</tbody></table>
   </div>
    <div class="col-sm-6">
<p style="text-align:center;"><code style="color:#0000ff">ori</code> <code style="color:#00aa00">$21</code>, <code style="color:#00aa00">$3</code>, <code style="color:#ff0000">5</code></p>
<ul>
    <li>Convert the mnemonic using the lookup table: <span style="color:#0000ff">opcode=001101</span></li>
    <li>Convert the registers: <code style="color:#00aa00">rs=00011</code> and <code style="color:#00aa00">rt = 10101</code></li>
    <li>Convert the immediate: <code style="color:#ff0000">imm=0000 0000 0000 0101</code></li>
    <li>Combine the fields to get machine code</li>
</ul>
<table>
    <tbody><tr><td style="text-align:center; color:#0000ff;">opcode</td> <td style="text-align:center; color:#00aa00;">rs</td> <td style="text-align:center; color:#00aa00;">rt</td> <td style="text-align:center; color:#ff0000;">immediate</td></tr>
    <tr><td style="color:#0000ff;">001101</td> <td style="color:#00aa00;">00011</td> <td style="color:#00aa00;">10101</td> <td style="color:#ff0000;">0000000000000101</td></tr>
</tbody></table>
    </div>
  </div>
</div>

<h4>I-type Instructions and the Arithmetic Machine</h4>
<p>Unfortunately, we cannot implement I-type instructions with just the basic arithmetic machine since it does not have the ability to perform sign extension or zero extension or the ability to choose between them before sending their values to the ALU. Also, the destination register for these I-type instructions is <code style="color:#00aa00">rt</code> rather than <code style="color:#00aa00">rd</code>. To solve both of these issues, we will add some multiplexers.</p>

<div class="alert alert-info" role="alert">
<code>inst[31:0]</code> is a 32-bit machine code instruction. Notice how the signals rs, rt, rd, and imm16 are taken as subsets from the 32-bit instruction.
</div>

<p></p><div class="container-fluid">
    <img src="./PRE07.1 â€” CS 233 _ PrairieLearn_files/arith_machine_zext.png" alt="" class="img-fluid mx-auto d-block">
</div><p></p>

<p>We add a mux controlled by <code style="color:#0000ff">rd_src</code> to choose whether we want to write to <code style="color:#00aa00">rd</code> for R-type instructions (<code style="color:#0000ff">rd_src=0</code>) or <code style="color:#00aa00">rt</code> for some I-type instructions (<code style="color:#0000ff">rd_src=1</code>).</p>

<p>We also add a sign extender and a zero extender to create the functionality that we were missing with the original arithmetic machine. We then add a mux controlled by <code style="color:#0000ff">alu_src2</code> to choose whether we want to read from the register file (<code style="color:#0000ff">alu_src2=00</code>) or the sign-extended immediate (<code style="color:#0000ff">alu_src2=01</code>) or the zero-extended immediate (<code style="color:#0000ff">alu_src2=10</code>).</p>

<div class="alert alert-info" role="alert">
This new datapath lets us implement both R-type and I-type arithmetic and logical instructions just by changing the control signals. This is an example of how a datapath can become flexibly programmable!
</div>

<h2>Instruction Decoding</h2>
<p>The arithmetic machine datapath has four <span style="color:#0000ff;">control</span> signals <code style="color:#0000ff;">alu_op[2:0]</code>, <code style="color:#0000ff;">wr_enable</code>, <code style="color:#0000ff;">rd_src</code>, and <code style="color:#0000ff;">alu_src2[1:0]</code>. These four control signals are not defined by the ISA but rather exist because of how we chose to implement the arithmetic machine.</p>

<p></p><div class="container-fluid">
    <img src="./PRE07.1 â€” CS 233 _ PrairieLearn_files/instruction_decoder.png" alt="" class="img-fluid mx-auto d-block">
</div><p></p>

<p>The MIPS instruction decoder is a circuit that receives the <code style="color:#0000ff;">opcode</code> and <code style="color:#0000ff;">funct</code> code from the 32-bit machine code instruction defined by the ISA and converts it to the <span style="color:#0000ff;">control</span> signals of our specific implementation of MIPS. We decide the value of these control signals by reasoning about what behavior the MIPS ISA requires for each instruction we implement. The MIPS reference guide can help (a portion of it is shown below again).</p>

<table style="border-collapse: collapse; width: 96.6667%;" border="1" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <th style="vertical-align: middle; text-align: left;" scope="col">Name</th>
            <th style="vertical-align: middle; text-align: left;" scope="col">Mnemonic</th>
            <th style="vertical-align: middle; text-align: left;" scope="col">Assembly Format</th>
            <th style="vertical-align: middle; text-align: left;" scope="col">Operation (In Verilog)</th>
            <th style="vertical-align: middle; text-align: left;" scope="col">Format/<br>Notes</th>
            <th style="vertical-align: middle; text-align: left;" scope="col">Opcode/<br>Funct</th>
        </tr>
        <tr>
            <td style="vertical-align: middle;">Add</td>
            <td style="vertical-align: middle;"><code class="mips">add</code></td>
            <td style="vertical-align: middle;"><code class="mips">add $rd, $rs, $rt</code></td>
            <td style="vertical-align: middle;"><code class="mips">R[rd]=R[rs]+R[rt];</code> <code class="mips">PC=PC+4</code></td>
            <td style="vertical-align: middle;">R / (1)</td>
            <td style="vertical-align: middle;">0 / 20<sub>hex</sub></td>
        </tr>
        <tr style="height: 28px;">
            <td style="vertical-align: middle;">Add Immediate</td>
            <td style="vertical-align: middle;"><code class="mips">addi</code></td>
            <td style="vertical-align: middle;"><code class="mips">addi $rt, $rs, imm</code></td>
            <td style="vertical-align: middle;"><code class="mips">R[rt]=R[rs] + SignExtImm;</code> <code class="mips">PC=PC+4</code></td>
            <td style="vertical-align: middle;">I / (1,2)</td>
            <td style="vertical-align: middle;">8<sub>hex</sub></td>
        </tr>
        <tr>
            <td style="vertical-align: middle;">Or Immediate</td>
            <td style="vertical-align: middle;"><code class="mips">ori</code></td>
            <td style="vertical-align: middle;"><code class="mips">ori $rt, $rs, imm</code></td>
            <td style="vertical-align: middle;"><code class="mips">R[rt]=R[rs] | ZeroExtImm;</code> <code class="mips">PC=PC+4</code></td>
            <td style="vertical-align: middle;">I / (3)</td>
            <td style="vertical-align: middle;">d<sub>hex</sub></td>
        </tr>
    </tbody>
</table>
<ol>
    <li>May cause overflow exception</li>
    <li><code class="mips">SignExtImm = { {16{inst[15]}}, inst[15:0] }</code></li>
    <li><code class="mips">ZeroExtImm = { {16{1'b0}}, inst[15:0] }</code></li>
</ol>

<p>The outputs of the MIPS instruction decoder are the four <span style="color:#0000ff;">control</span> signals for our datapath and an <code>except</code> output that indicates that an exception or error occurred.</p>

<ul>
<li><code style="color:#0000ff;">alu_op[2:0]</code>: Controls which operation our ALU performs. Look at the "Operation (In Verilog)" column of the MIPS reference. What arithmetic/logical operation is performed on the register file data (i.e., code with the form <code>R[rd]=...</code> or <code>R[rt]=...</code>. Ignore <code>PC=PC+4</code> for now, we will discuss that soon)? Match the operation in the Verilog to the <span style="color:#0000ff;">control</span> signals for the ALU. For example, <code>add</code> and <code>addi</code> both perform addition, which is 010 for the ALU. <code>or</code> performs a bitwise OR, which is 101 for the ALU.</li>
<li><code style="color:#0000ff;">wr_enable</code>: Controls whether we write to the register file. Look at the "Operation (In Verilog)" column of the MIPS reference. Does the Verilog assign to the register file (i.e., code with the form <code>R[??]=...</code>)? If yes, <code style="color:#0000ff;">wr_enable=1</code>, else <code style="color:#0000ff;">wr_enable=0</code></li>
<li><code style="color:#0000ff;">rd_src</code>: Controls where we write to in the register file. Look at the "Operation (In Verilog)" column of the MIPS reference. Does the Verilog assign to rd (i.e., <code>R[rd]=...</code>) or rt (i.e., <code>R[rt]=...</code>)? If it assigns to rd, <code style="color:#0000ff;">rd_src=0</code>, because that will cause the mux to choose rd (see datapath below). If it assigns to rt, <code style="color:#0000ff;">rd_src=1</code>, because that will cause the mux to choose rt. If neither, it doesn't matter what <code style="color:#0000ff;">rd_src</code> is, because no register is being written to (i.e., when <code style="color:#0000ff;">wr_enable==0</code>).</li>
<li><code style="color:#0000ff;">alu_src2[1:0]</code>: Controls which source or operand to choose for the B input (input2) of the ALU. Look at the "Operation (In Verilog)" column of the MIPS reference. What is the 2nd operand in the Verilog? If <code>R[rt]</code>, <code style="color:#0000ff;">alu_src2[1:0]=00</code>, because that will cause the mux to choose <code>R[rt]</code> (see datapath below). If <code>SignExtImm</code>, <code style="color:#0000ff;">alu_src2[1:0]=01</code>, because that will cause the mux to choose <code>SignExtImm</code>. If <code>ZeroExtImm</code>, <code style="color:#0000ff;">alu_src2[1:0]=10</code>, because that will cause the mux to choose <code>ZeroExtImm</code>.</li>
<li><code>except</code>: Indicates that an error occurred. Should be 0 if the <code style="color:#0000ff;">opcode</code> and <code style="color:#0000ff;">funct</code> code match an instruction that exists in the MIPS ISA. Should be 1 if the <code style="color:#0000ff;">opcode</code> and <code style="color:#0000ff;">funct</code> code do not match an instruction that exists in the MIPS ISA.</li>
</ul>

<p>Correctly implementing the MIPS instruction decoder requires coordinating your understanding of what the MIPS ISA specifies, the particular implementation of the MIPS datapath, and how the circuit components behave.</p>

<p></p><div class="container-fluid">
    <img src="./PRE07.1 â€” CS 233 _ PrairieLearn_files/arith_machine_zext.png" alt="" class="img-fluid mx-auto d-block">
</div><p></p>
<h2>Arithmetic Machine Datapath and Decoding Examples</h2>
<p>Following are three examples: one to illustrate how R-type instructions propagate on the extended arithmetic machine datapath and two to illustrate how I-type instructions propagate on this datapath.</p>

<p>On the top-left of the figure is an example piece of C code where we indicate which register each variable is mapped to in our assembly code. On the top-right is some MIPS assembly code that could implement the desired C code. On the bottom right is the MIPS arithmetic machine annotated to show the value on each bus of the system during the clock cycle that the assembly instruction is running. On the bottom-right are two tables that represent the contents of the register file. The left table illustrates the current state of the register file during the clock cycle. The register that will be overwritten after the next positive clock edge is crossed out. The right table illustrates what the next state of the register file will be after the next positive clock edge (hence the <sup>+</sup>).</p>

<div class="alert alert-info" role="alert">
Hardware uses a design philosophy of calculating everything and discarding what we don't need. We understand that this philosophy is counter-intuitive when you come from a software background. Trust us, though, it's faster and more efficient to do it this way. If you want to understand more about why, ask the instructors!
</div>

<p></p><div class="container-fluid">
    <img src="./PRE07.1 â€” CS 233 _ PrairieLearn_files/datapath_annotated3R.png" alt="" class="img-fluid mx-auto d-block">
</div><p></p>

<div class="alert alert-info" role="alert">
<code style="color:#ff0000">imm16</code> has value 0x1820 because it is parsing the R-type instruction as if it was an I-type instruction. The machine code for this <code>add</code> instruction is 000000 00001 00110 00011 00000 100000. The 16 least-significant bits of this code is 0001 1000 0010 0000 (0x1820). This is an example of "calculating everything and discarding what we don't need".
</div>

<p></p><div class="container-fluid">
    <img src="./PRE07.1 â€” CS 233 _ PrairieLearn_files/datapath_annotated3I.png" alt="" class="img-fluid mx-auto d-block">
</div><p></p>

<div class="alert alert-info" role="alert">
<code style="color:#00aa00">rd</code> has value 00000 because it is parsing the I-type instruction as if it was an R-type instruction. The machine code for this <code>addi</code> instruction is 001000 00011 00001 000000000000001. The 5 bits that align with the <code style="color:#00aa00">rd</code> field are the first 5 bits of the immediate field 00000. This is an example of "calculating everything and discarding what we don't need".
</div>

<div class="alert alert-info" role="alert">
The register file reads from <code style="color:#00aa00">rt==00011</code> and outputs <code style="color:#ff0000">R[3]==0xDEADBEEF</code> even though it is an I-type instruction because we "calculate everything and discard what we don't need".
</div>

<p></p><div class="container-fluid">
    <img src="./PRE07.1 â€” CS 233 _ PrairieLearn_files/datapath_annotated4.png" alt="" class="img-fluid mx-auto d-block">
</div><p></p>
<div class="alert alert-info" role="alert">
<code style="color:#00aa00">rd</code> has value 11111 because it is parsing the I-type instruction as if it was an R-type instruction. The machine code for this <code>ori</code> instruction is 001101 00010 00100 1111111111111111. The 5 bits that align with the <code style="color:#00aa00">rd</code> field are the first 5 bits of the immediate field 11111. This is an example of "calculating everything and discarding what we don't need".
</div>
<h2>Controlling the Arithmetic Machine</h2>
<p>Rather than create a hardware finite state machine to control the arithmetic machine datapath, we store machine code instructions inside an instruction memory and use a Program Counter (<code>PC</code>) finite state machine to control the order of instructions we read from the instruction memory. Software or programs "live" inside the instruction memory.</p>

<h2>Instruction Memory</h2>

<p>Machine code instructions are stored inside the instruction memory. The instruction memory is conceptually similar to a register file (a memory array with addresses), except that it is much bigger (and more expensive). The instruction memory is a 2<sup>32</sup>x8 memory (4 GB of storage versus the 1KB of the register file).</p>

<p>Since machine code instructions are 32 bits large but each address of the instruction memory can store only 8 bits, each machine code instruction is stored across four addresses in the instruction memory. Machine code instructions are stored using Little Endian ordering.</p>

<h3>Endianness</h3>
<p>When a piece of data is bigger than the addressibility (i.e., amount of data stored in each address) of the memory device storing it, we use endianness to decide how to break-up the piece of data over several addresses.</p>

<h5>Little Endian</h5>
<div class="container">
  <div class="row">
    <div class="col-sm-9">
<p>In Little Endian, we divide the size of the data (e.g., 32 bits) to be stored by the size of the addressibility (e.g., 8 bits) to determine how many chunks the data will be stored in (e.g., 32/8 = 4, 8-bit chunks). The "little end" or the chunk containing the least-significant bits are stored in the first memory address and the remaining chunks are stored in consecutive memory addresses in ascending significance order. For example, the MIPS assembly program</p>

<pre style="background-color: #f0f0f0; border:1px" class="rounded">  <span style="color:#0000ff">nor</span><span style="color: #bbbbbb">    </span><span style="color: #00aa00">$22</span>,<span style="color: #bbbbbb"> </span><span style="color: #00aa00">$16</span>,<span style="color: #bbbbbb"> </span><span style="color: #00aa00">$18</span>
  <span style="color:#0000ff">andi</span><span style="color: #bbbbbb">   </span><span style="color: #00aa00">$25</span>,<span style="color: #bbbbbb"> </span><span style="color: #00aa00">$9</span>,<span style="color: #bbbbbb"> </span><span style="color:#ff0000">0x4ccd</span>
</pre>

<p>would have the machine encoding</p>
<div class="pl-code mb-3 " style="--pl-code-background-color: #f0f0f0; --pl-code-line-number-color: #666666;">
    <div id="pl-code-d0a61dc4-f62d-4dee-9ae9-597e8cdb0eae" class="rounded"><div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span style="">1</span>
<span style="">2</span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span>0000 0010 0001 0010 1011 0000 0010 0111
0011 0001 0011 1001 0100 1100 1100 1101
</pre></div></td></tr></tbody></table></div>
</div>

</div>
<p>which in hex would</p>
<div class="pl-code mb-3 " style="--pl-code-background-color: #f0f0f0; --pl-code-line-number-color: #666666;">
    <div id="pl-code-cd24cce5-8d0a-41a5-98f5-1e5d6d383620" class="rounded"><div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span style="">1</span>
<span style="">2</span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span>0x0212b027
0x31391ccd
</pre></div></td></tr></tbody></table></div>
</div>

</div>
    </div>
    <div class="col-sm-3">
<table class="table-bordered truth-table">
    <thead>
        <tr>
            <th style="color:#00aa00;">Address</th>
            <th style="color:Red;">Data</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="color:#006600; border-top: 5px solid black; border-left: 5px solid black;">0x00000000</td>
            <td style="color:Red; border-top: 5px solid black; border-right: 5px solid black;">0x27</td>
        </tr>
        <tr>
            <td style="color:#006600; border-left: 5px solid black;">0x00000001</td>
            <td style="color:Red; border-right: 5px solid black;">0xb0</td>
        </tr>
        <tr>
            <td style="color:#006600; border-left: 5px solid black;">0x00000002</td>
            <td style="color:Red; border-right: 5px solid black;">0x12</td>
        </tr>
        <tr>
            <td style="color:#006600; border-bottom: 5px solid black; border-left: 5px solid black;">0x00000003</td>
            <td style="color:Red; border-bottom: 5px solid black; border-right: 5px solid black;">0x02</td>
        </tr>
        <tr>
            <td style="color:#006600; border-left: 5px solid black;">0x00000004</td>
            <td style="color:Red; border-right: 5px solid black;">0xcd</td>
        </tr>
        <tr>
            <td style="color:#006600; border-left: 5px solid black;">0x00000005</td>
            <td style="color:Red; border-right: 5px solid black;">0x1c</td>
        </tr>
        <tr>
            <td style="color:#006600; border-left: 5px solid black;">0x00000006</td>
            <td style="color:Red; border-right: 5px solid black;">0x39</td>
        </tr>
        <tr>
            <td style="color:#006600; border-bottom: 5px solid black; border-left: 5px solid black;">0x00000007</td>
            <td style="color:Red; border-right: 5px solid black; border-bottom: 5px solid black;">0x31</td>
        </tr>
        <tr>
            <td style="color:#006600;">0x00000008</td>
            <td style="color:Red;">0x??</td>
        </tr>
        <tr>
            <td style="color:#006600;">...</td>
            <td style="color:Red;">...</td>
        </tr>
    </tbody>
</table>
    </div>
  </div>
</div>

<h5>Big Endian</h5>
<div class="container">
  <div class="row">
    <div class="col-sm-9">
<p>In Big Endian, we divide the size of the data (e.g., 32 bits) to be stored by the size of the addressibility (e.g., 8 bits) to determine how many chunks the data will be stored in (e.g., 32/8 = 4, 8-bit chunks). The "big end" or the chunk containing the most-significant bits are stored in the first memory address and the remaining chunks are stored in consecutive memory addresses in descending significance order. For example, the MIPS assembly program</p>
<pre style="background-color: #f0f0f0; border:1px" class="rounded">  <span style="color:#0000ff">nor</span><span style="color: #bbbbbb">    </span><span style="color: #00aa00">$22</span>,<span style="color: #bbbbbb"> </span><span style="color: #00aa00">$16</span>,<span style="color: #bbbbbb"> </span><span style="color: #00aa00">$18</span>
  <span style="color:#0000ff">andi</span><span style="color: #bbbbbb">   </span><span style="color: #00aa00">$25</span>,<span style="color: #bbbbbb"> </span><span style="color: #00aa00">$9</span>,<span style="color: #bbbbbb"> </span><span style="color:#ff0000">0x4ccd</span>
</pre>
<p>would have the machine encoding</p>
<div class="pl-code mb-3 " style="--pl-code-background-color: #f0f0f0; --pl-code-line-number-color: #666666;">
    <div id="pl-code-e7d714a5-16cd-4bf4-93db-3a73a1c97ed8" class="rounded"><div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span style="">1</span>
<span style="">2</span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span>0000 0010 0001 0010 1011 0000 0010 0111
0011 0001 0011 1001 0100 1100 1100 1101
</pre></div></td></tr></tbody></table></div>
</div>

</div>
<p>which in hex would</p>
<div class="pl-code mb-3 " style="--pl-code-background-color: #f0f0f0; --pl-code-line-number-color: #666666;">
    <div id="pl-code-f6814e82-2b74-41da-9fe1-67e420ba45eb" class="rounded"><div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span style="">1</span>
<span style="">2</span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span>0x0212b027
0x31391ccd
</pre></div></td></tr></tbody></table></div>
</div>

</div>
    </div>
    <div class="col-sm-3">
<table class="table-bordered truth-table">
    <thead>
        <tr>
            <th style="color:#00aa00;">Address</th>
            <th style="color:Red;">Data</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="color:#006600; border-top: 5px solid black; border-left: 5px solid black;">0x00000000</td>
            <td style="color:Red; border-top: 5px solid black; border-right: 5px solid black;">0x02</td>
        </tr>
        <tr>
            <td style="color:#006600; border-left: 5px solid black;">0x00000001</td>
            <td style="color:Red; border-right: 5px solid black;">0x12</td>
        </tr>
        <tr>
            <td style="color:#006600; border-left: 5px solid black;">0x00000002</td>
            <td style="color:Red; border-right: 5px solid black;">0xb0</td>
        </tr>
        <tr>
            <td style="color:#006600; border-bottom: 5px solid black; border-left: 5px solid black;">0x00000003</td>
            <td style="color:Red; border-bottom: 5px solid black; border-right: 5px solid black;">0x27</td>
        </tr>
        <tr>
            <td style="color:#006600; border-left: 5px solid black;">0x00000004</td>
            <td style="color:Red; border-right: 5px solid black;">0x31</td>
        </tr>
        <tr>
            <td style="color:#006600; border-left: 5px solid black;">0x00000005</td>
            <td style="color:Red; border-right: 5px solid black;">0x39</td>
        </tr>
        <tr>
            <td style="color:#006600; border-left: 5px solid black;">0x00000006</td>
            <td style="color:Red; border-right: 5px solid black;">0x1c</td>
        </tr>
        <tr>
            <td style="color:#006600; border-bottom: 5px solid black; border-left: 5px solid black;">0x00000007</td>
            <td style="color:Red; border-right: 5px solid black; border-bottom: 5px solid black;">0xcd</td>
        </tr>
        <tr>
            <td style="color:#006600;">0x00000008</td>
            <td style="color:Red;">0x??</td>
        </tr>
        <tr>
            <td style="color:#006600;">...</td>
            <td style="color:Red;">...</td>
        </tr>
    </tbody>
</table>
    </div>
  </div>
</div>

<h3>Word Alignment</h3>
<p>A chunk of 8 bits is called a Byte. A chunk of 32 bits or 4 Bytes is called a "word". The MIPS instruction memory requires "word alignment", which means that every word must start at an address that is divisible by 4. Since machine code instructions are words, they must start at addresses that are divisible by 4. In the Endianness examples, notice how the instructions start at address that are evenly divisible by 4 (i.e., 0 % 4 = 0, 4 % 4 = 0).</p>

<h3>Program Counter <code>PC</code></h3>
<p>Because instructions are each word sized and must be word aligned, we know that every instruction starts 4 addresses after the previous instruction. For example, the following program might be stored at the following addresses.</p>
<table class="truth-table">
    <tbody>
        <tr>
            <td style="color:#00aa00; text-align: left;">Address</td>
            <td style="color:#ff0000; text-align: left;">&nbsp;&nbsp;Instruction</td>
        </tr>
        <tr>
            <td style="color:#009900; text-align: left;">0x00400034</td>
            <td style="text-align: left"><code style="color:#0000ff">&nbsp;&nbsp;mul&nbsp;&nbsp;&nbsp;&nbsp;</code><code style="color:#00aa00">$14</code>, <code style="color:#00aa00">$13</code>, <code style="color:#00aa00">$20</code></td>
        </tr>
        <tr>
            <td style="color:#009900; text-align: left;">0x00400038</td>
            <td style="text-align: left"><code style="color:#0000ff">&nbsp;&nbsp;addi&nbsp;&nbsp;&nbsp;</code><code style="color:#00aa00">$14</code>, <code style="color:#00aa00">$14</code>, <code style="color:#ff0000">4</code></td>
        </tr>
        <tr>
            <td style="color:#009900; text-align: left;">0x0040003c</td>
            <td style="text-align: left"><code style="color:#0000ff">&nbsp;&nbsp;sub&nbsp;&nbsp;&nbsp;&nbsp;</code><code style="color:#00aa00">$15</code>, <code style="color:#00aa00">$14</code>, <code style="color:#00aa00">$15</code></td>
        </tr>
        <tr>
            <td style="color:#009900; text-align: left;">0x00400040</td>
            <td style="text-align: left"><code style="color:#0000ff">&nbsp;&nbsp;xor&nbsp;&nbsp;&nbsp;&nbsp;</code><code style="color:#00aa00">$12</code>, <code style="color:#00aa00">$15</code>, <code style="color:#00aa00">$8</code></td>
        </tr>
    </tbody>
</table>

<p>To run a simple program like above, we simply need a variable that counts by 4 every clock cycle so that it points to a new instruction every clock cycle. We call this counter our Program Counter or <code>PC</code>. If you look at the MIPS reference under the "Operation (In Verilog)" column, you will see that every arithmetic and logic instruction also has <code>PC=PC+4</code>, indicating that the program counter must increment to the next instruction after the instruction.</p>

<div class="container-fluid">
    <img src="./PRE07.1 â€” CS 233 _ PrairieLearn_files/full_arith_machine.png" alt="" class="img-fluid mx-auto d-block">
</div>

<p><code>PC</code> is a stand-alone register (see the top-left of the figure). It is not part of a register file. The state of <code>PC</code> is sent through a special ALU hardwired to always add 4 so that <code>PC</code> can increment by 4 after each instruction and point to the next instruction in memory.</p>

<p>The state of <code>PC</code> is also connected to the <span style="color:#00aa00">address</span> input of the instruction memory so that it can point to the instruction that should be executed. The output of the read port of the instruction memory (i.e., the machine code instruction we want to execute) is then sent to the MIPS instruction decoder and arithmetic machine to be executed.</p>

<p>The <code>PC</code> register, +4 adder, instruction memory, and MIPS instruction decoder together play the role of a control FSM like what we had you design for the multiplication circuit and for Lab 3. In other words, these components are a software programmable FSM.</p>
<h2>Translating C to MIPS assembly code</h2>
<p>In the 1950s, Rear Admiral Grace Hopper proposed the idea of creatinng higher-level languages that used English words rather than writing code in machine code or assembly code. A key idea of high-level languages is that they are machine independent: can be written without knowledge of the underlying machine. She would go on to invent the first compiler and linker to make these languages possible and then invented the first widely used high-level programming language: COBOL. For all of these accomplishments, she is some times called the "Mother of Computer Science."</p>

<p>You will learn how compilers work in part by becoming a human compiler: translating machine-independent languages (C/C++) to assembly code.</p>

<p>To translate C to MIPS assembly, you must know how to read code precisely, understanding the order in which the code will execute operations. For example, consider the following C code</p>

<div class="pl-code mb-3 " style="--pl-code-background-color: #f0f0f0; --pl-code-line-number-color: #666666;">
    <div id="pl-code-b55e9871-5584-42ba-aa88-7f7269b9955f" class="rounded"><div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span style="">1</span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span>m<span style="color: #bbbbbb"> </span><span style="color: #666666">+=</span><span style="color: #bbbbbb"> </span><span style="color: #666666">~</span>n<span style="color: #bbbbbb"> </span><span style="color: #666666">&amp;</span><span style="color: #bbbbbb"> </span>p<span style="color: #bbbbbb"> </span><span style="color: #666666">-</span><span style="color: #bbbbbb"> </span>q;
</pre></div></td></tr></tbody></table></div>
</div>

</div>

<p>To translate this C code to MIPS assembly, you need to know two things: 1) how to map variables to their allocated memory locations (e.g., register numbers) and 2) the order of precedence of the operators.</p>

<h4>Memory allocation</h4>
<p>With simple arithmetic/logical expressions like the above, a compiler would most likely register allocate the variables: Assign one variable to one register. To start, we will tell you to which register allocations to use. For example, we might tell you to allocate <code>m</code> to <code>$14</code>, <code>n</code> to <code>$15</code>, <code>p</code> to <code>$16</code>, and <code>q</code> to <code>$17</code>. We would also tell you that other registers, can be used as temporary storage variables since they are not currently allocated to other variables. For example, we might tell you that <code>$8</code>-<code>$13</code> can be used for temporary variables that do not appear in the C code.</p>

<h4>Operator precedence</h4>
<p>We will provide you with a operator precedence table to help you. Operators at the top of the table have the highest precedence (i.e., must be done before other operators) and operators at the bottom of the table have the lowest precedence. For operators with the same level of precedence, use the associativity to determine the order to execute them. For example, the expression <code>struct.array[i]-&gt;data</code> has three operators (<code>.</code>, <code>[]</code>, and <code>-&gt;</code>) that all have the same order of precedence, so we would execute them from left to right (<code>.</code>, <code>[]</code>, and <code>-&gt;</code>).</p>

<p>In the C code example above, <code>~</code> has the highest precedence, <code>-</code> has the next highest precendence, <code>&amp;</code> has the next highest precedence, and <code>+=</code> has the lowest precedence.</p>

<div class="alert alert-info" role="alert">
Be careful! Some operators are "overloaded" (have more than one meaning). For example, a pointer dereference (e.g., <code>*ptr</code>) has higher precedence, and should not be confused with a multiplication <code>a*b</code>.
</div>

<h4>Example MIPS assembly code</h4>
<p>With the information in the previous two subsections, we could derive the following MIPS assembly code for the C code above.</p>

<div class="pl-code mb-3 " style="--pl-code-background-color: #f0f0f0; --pl-code-line-number-color: #666666;">
    <div id="pl-code-cd0e12fd-ae1a-4e19-ae13-ab30234cda17" class="rounded"><div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span style=""> 1</span>
<span style=""> 2</span>
<span style=""> 3</span>
<span style=""> 4</span>
<span style=""> 5</span>
<span style=""> 6</span>
<span style=""> 7</span>
<span style=""> 8</span>
<span style=""> 9</span>
<span style="">10</span>
<span style="">11</span>
<span style="">12</span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><span style="color: #60a0b0; font-style: italic"># Translating C code: m += ~n &amp; p - q;</span>
<span style="color: #60a0b0; font-style: italic"># m in $14</span>
<span style="color: #60a0b0; font-style: italic"># n in $15</span>
<span style="color: #60a0b0; font-style: italic"># p in $16</span>
<span style="color: #60a0b0; font-style: italic"># q in $17</span>
<span style="color: #60a0b0; font-style: italic"># $8-$13 can be used as temporary storage</span>

nor<span style="color: #bbbbbb">   </span><span style="color: #bb60d5">$8</span>,<span style="color: #bbbbbb"> </span><span style="color: #bb60d5">$15</span>,<span style="color: #bbbbbb"> </span><span style="color: #bb60d5">$15</span><span style="color: #bbbbbb">   </span><span style="color: #60a0b0; font-style: italic"># bitwise complement n first, store result in a temporary variable to not mess up m, n, p, or q</span>
<span style="color: #bbbbbb">                     </span><span style="color: #60a0b0; font-style: italic"># NOT is not an instruction, so we use NOR instead (NOT(A OR A) == NOT A)</span>
<span style="color: #007020">sub</span><span style="color: #bbbbbb">   </span><span style="color: #bb60d5">$9</span>,<span style="color: #bbbbbb"> </span><span style="color: #bb60d5">$16</span>,<span style="color: #bbbbbb"> </span><span style="color: #bb60d5">$17</span><span style="color: #bbbbbb">   </span><span style="color: #60a0b0; font-style: italic"># subtraction next, store result in a temporary variable to not mess up m, n, p, or q</span>
<span style="color: #007020; font-weight: bold">and</span><span style="color: #bbbbbb">   </span><span style="color: #bb60d5">$8</span>,<span style="color: #bbbbbb"> </span><span style="color: #bb60d5">$8</span>,<span style="color: #bbbbbb"> </span><span style="color: #bb60d5">$9</span><span style="color: #bbbbbb">     </span><span style="color: #60a0b0; font-style: italic"># bitwise AND next, re-use temporary variable since we don't need ~n anymore</span>
add<span style="color: #bbbbbb">   </span><span style="color: #bb60d5">$14</span>,<span style="color: #bbbbbb"> </span><span style="color: #bb60d5">$8</span>,<span style="color: #bbbbbb"> </span><span style="color: #bb60d5">$14</span><span style="color: #bbbbbb">   </span><span style="color: #60a0b0; font-style: italic"># assignment by sum next, overwrite the value of m</span>
</pre></div></td></tr></tbody></table></div>
</div>

</div>
<h4>Operator Precedence Table</h4>
<p>This table was adapted from <a href="https://en.cppreference.com/w/c/language/operator_precedence">https://en.cppreference.com/w/c/language/operator_precedence</a></p>
<table class="table-bordered table-striped">

<tbody><tr>
<th style="text-align: left"> Precedence
</th>
<th style="text-align: left"> Operator
</th>
<th style="text-align: left"> Description
</th>
<th style="text-align: left"> Associativity
</th></tr>
<tr>
<th rowspan="5"> 1
</th>
<td style="border-bottom-style: none"> <code>++</code> <code>--</code>
</td>
<td style="border-bottom-style: none"> Suffix/postfix increment and decrement
</td>
<td style="vertical-align: top" rowspan="5"> Left-to-right
</td></tr>
<tr>
<td style="border-bottom-style: none; border-top-style: none"> <code>()</code>
</td>
<td style="border-bottom-style: none; border-top-style: none"> Function call
</td></tr>
<tr>
<td style="border-bottom-style: none; border-top-style: none"> <code>[]</code>
</td>
<td style="border-bottom-style: none; border-top-style: none"> Array subscripting
</td></tr>
<tr>
<td style="border-bottom-style: none; border-top-style: none"> <code>.</code>
</td>
<td style="border-bottom-style: none; border-top-style: none"> Structure and union member access
</td></tr>
<tr>
<td style="border-bottom-style: none; border-top-style: none"> <code>-&gt;</code>
</td>
<td style="border-bottom-style: none; border-top-style: none"> Structure and union member access through pointer
</td></tr>
<tr>
<th rowspan="7"> 2
</th>
<td style="border-bottom-style: none"> <code>++</code> <code>--</code>
</td>
<td style="border-bottom-style: none"> Prefix increment and decrement
</td>
<td style="vertical-align: top" rowspan="7"> Right-to-left
</td></tr>
<tr>
<td style="border-bottom-style: none; border-top-style: none"> <code>!</code> <code>~</code>
</td>
<td style="border-bottom-style: none; border-top-style: none"> Logical NOT and bitwise NOT
</td></tr>
<tr>
<td style="border-bottom-style: none; border-top-style: none"> <code>(<i>type</i>)</code>
</td>
<td style="border-bottom-style: none; border-top-style: none"> Cast
</td></tr>
<tr>
<td style="border-bottom-style: none; border-top-style: none"> <code>*</code>
</td>
<td style="border-bottom-style: none; border-top-style: none"> Indirection (dereference)
</td></tr>
<tr>
<td style="border-bottom-style: none; border-top-style: none"> <code>&amp;</code>
</td>
<td style="border-bottom-style: none; border-top-style: none"> Address-of
</td></tr>
<tr>
<td style="border-bottom-style: none; border-top-style: none"> <code>sizeof</code>
</td>
<td style="border-bottom-style: none; border-top-style: none"> Size-of

</td></tr>
<tr>
<td style="border-bottom-style: none; border-top-style: none"> <code>_Alignof</code>
</td>
<td style="border-bottom-style: none; border-top-style: none"> Alignment requirement
</td></tr>
<tr>
<th> 3
</th>
<td> <code>*</code> <code>/</code> <code>%</code>
</td>
<td> Multiplication, division, and remainder
</td>
<td style="vertical-align: top" rowspan="11"> Left-to-right
</td></tr>
<tr>
<th> 4
</th>
<td> <code>+</code> <code>-</code>
</td>
<td> Addition and subtraction
</td></tr>
<tr>
<th> 5
</th>
<td> <code>&lt;&lt;</code> <code>&gt;&gt;</code>
</td>
<td> Bitwise left shift and right shift
</td></tr>
<tr>
<th rowspan="2"> 6
</th>
<td style="border-bottom-style: none"> <code>&lt;</code> <code>&lt;=</code>
</td>
<td style="border-bottom-style: none"> For relational operators &lt; and â‰¤ respectively
</td></tr>
<tr>
<td style="border-top-style: none"> <code>&gt;</code> <code>&gt;=</code>
</td>
<td style="border-top-style: none"> For relational operators &gt; and â‰¥ respectively
</td></tr>
<tr>
<th> 7
</th>
<td> <code>==</code> <code>!=</code>
</td>
<td> For relational = and â‰  respectively
</td></tr>
<tr>
<th> 8
</th>
<td> <code>&amp;</code>
</td>
<td> Bitwise AND
</td></tr>
<tr>
<th> 9
</th>
<td> <code>^</code>
</td>
<td> Bitwise XOR (exclusive or)
</td></tr>
<tr>
<th> 10
</th>
<td> <code>|</code>
</td>
<td> Bitwise OR (inclusive or)
</td></tr>
<tr>
<th> 11
</th>
<td> <code>&amp;&amp;</code>
</td>
<td> Logical AND
</td></tr>
<tr>
<th> 12
</th>
<td> <code>||</code>
</td>
<td> Logical OR
</td></tr>
<tr>
<th> 13
</th>
<td> <code>?:</code>
</td>
<td> Ternary conditional
</td>
<td style="vertical-align: top" rowspan="6"> Right-to-left
</td></tr>
<tr>
<th rowspan="5"> 14
</th>
<td style="border-bottom-style: none"> <code>=</code>
</td>
<td style="border-bottom-style: none"> Simple assignment
</td></tr>
<tr>
<td style="border-bottom-style: none; border-top-style: none"> <code>+=</code> <code>-=</code>
</td>
<td style="border-bottom-style: none; border-top-style: none"> Assignment by sum and difference
</td></tr>
<tr>
<td style="border-bottom-style: none; border-top-style: none"> <code>*=</code> <code>/=</code> <code>%=</code>
</td>
<td style="border-bottom-style: none; border-top-style: none"> Assignment by product, quotient, and remainder
</td></tr>
<tr>
<td style="border-bottom-style: none; border-top-style: none"> <code>&lt;&lt;=</code> <code>&gt;&gt;=</code>
</td>
<td style="border-bottom-style: none; border-top-style: none"> Assignment by bitwise left shift and right shift
</td></tr>
<tr>
<td style="border-top-style: none"> <code>&amp;=</code> <code>^=</code> <code>|=</code>
</td>
<td style="border-top-style: none"> Assignment by bitwise AND, XOR, and OR
</td></tr>
<tr>
<th> 15
</th>
<td> <code>,</code>
</td>
<td> Comma
</td>
<td> Left-to-right
</td></tr></tbody></table>


<h2>Partial MIPS Reference Guide with Explainer</h2>
<h2>Core Instruction Set</h2>
<table style="border-collapse: collapse; width: 96.6667%; height: 304px;" border="1" cellspacing="0" cellpadding="0">
    <caption>List of MIPS instructions for CS 233</caption>
    <tbody>
        <tr style="height: 52px;">
            <th style="width: 17.5%; height: 52px; vertical-align: middle; text-align: left;" scope="col">Name</th>
            <th style="width: 7.5%; height: 52px; vertical-align: middle; text-align: left;" scope="col">Mnemonic</th>
            <th style="width: 20%; height: 52px; vertical-align: middle; text-align: left;" scope="col">Assembly Format</th>
            <th style="width: 35%; height: 52px; vertical-align: middle; text-align: left;" scope="col">Operation (In Verilog)</th>
            <th style="width: 5%; height: 52px; vertical-align: middle; text-align: left;" scope="col">Format/<br>Notes</th>
            <th style="width: 5%; height: 52px; vertical-align: middle; text-align: left;" scope="col">Opcode/<br>Funct</th>
        </tr>
        <tr style="height: 28px;">
            <td style="width: 17.5%; height: 28px; vertical-align: middle;">Add</td>
            <td style="width: 7.5%; height: 28px; vertical-align: middle;"><code class="mips">add</code></td>
            <td style="width: 20%; height: 28px; vertical-align: middle;"><code class="mips">add $rd, $rs, $rt</code></td>
            <td style="width: 35%; height: 28px; vertical-align: middle;"><code class="mips">R[rd]=R[rs]+R[rt];</code> <code class="mips">PC=PC+4</code></td>
            <td style="width: 5%; height: 28px; vertical-align: middle;">R / (1)</td>
            <td style="width: 5%; height: 28px; vertical-align: middle;">0 / 20<sub>hex</sub></td>
        </tr>
        <tr style="height: 28px;">
            <td style="width: 17.5%; height: 28px; vertical-align: middle;">Add Immediate</td>
            <td style="width: 7.5%; height: 28px; vertical-align: middle;"><code class="mips">addi</code></td>
            <td style="width: 20%; height: 28px; vertical-align: middle;"><code class="mips">addi $rt, $rs, imm</code></td>
            <td style="width: 35%; height: 28px; vertical-align: middle;"><code class="mips">R[rt]=R[rs] + SignExtImm;</code> <code class="mips">PC=PC+4</code></td>
            <td style="width: 5%; height: 28px; vertical-align: middle;">I / (1,2)</td>
            <td style="width: 5%; height: 28px; vertical-align: middle;">8<sub>hex</sub></td>
        </tr>
        <tr style="height: 28px;">
            <td style="width: 17.5%; height: 28px; vertical-align: middle;">Add Immediate Unsigned</td>
            <td style="width: 7.5%; height: 28px; vertical-align: middle;"><code class="mips">addiu</code></td>
            <td style="width: 20%; height: 28px; vertical-align: middle;"><code class="mips">addiu $rt, $rs, imm</code></td>
            <td style="width: 35%; height: 28px; vertical-align: middle;"><code class="mips">R[rt]=R[rs] + SignExtImm;</code> <code class="mips">PC=PC+4</code></td>
            <td style="width: 5%; height: 28px; vertical-align: middle;">I / (2)</td>
            <td style="width: 5%; height: 28px; vertical-align: middle;">9<sub>hex</sub></td>
        </tr>
        <tr style="height: 28px;">
            <td style="width: 17.5%; height: 28px; vertical-align: middle;">Add Unsigned</td>
            <td style="width: 7.5%; height: 28px; vertical-align: middle;"><code class="mips">addu</code></td>
            <td style="width: 20%; height: 28px; vertical-align: middle;"><code class="mips">addu $rd, $rs, $rt</code></td>
            <td style="width: 35%; height: 28px; vertical-align: middle;"><code class="mips">R[rd]=R[rs]+R[rt];</code> <code class="mips">PC=PC+4</code></td>
            <td style="width: 5%; height: 28px; vertical-align: middle;">R</td>
            <td style="width: 5%; height: 28px; vertical-align: middle;">0 / 21<sub>hex</sub></td>
        </tr>
        <tr style="height: 28px;">
            <td style="width: 17.5%; height: 28px; vertical-align: middle;">And</td>
            <td style="width: 7.5%; height: 28px; vertical-align: middle;"><code class="mips">and</code></td>
            <td style="width: 20%; height: 28px; vertical-align: middle;"><code class="mips">and $rd, $rs, $rt</code></td>
            <td style="width: 35%; height: 28px; vertical-align: middle;"><code class="mips">R[rd]=R[rs] &amp; R[rt];</code> <code class="mips">PC=PC+4</code></td>
            <td style="width: 5%; height: 28px; vertical-align: middle;">R</td>
            <td style="width: 5%; height: 28px; vertical-align: middle;">0 / 24<sub>hex</sub></td>
        </tr>
        <tr style="height: 28px;">
            <td style="width: 17.5%; height: 28px; vertical-align: middle;">And Immediate</td>
            <td style="width: 7.5%; height: 28px; vertical-align: middle;"><code class="mips">andi</code></td>
            <td style="width: 20%; height: 28px; vertical-align: middle;"><code class="mips">andi $rt, $rs, imm</code></td>
            <td style="width: 35%; height: 28px; vertical-align: middle;"><code class="mips">R[rt]=R[rs] &amp; ZeroExtImm;</code> <code class="mips">PC=PC+4</code></td>
            <td style="width: 5%; height: 28px; vertical-align: middle;">I / (3)</td>
            <td style="width: 5%; height: 28px; vertical-align: middle;">c<sub>hex</sub></td>
        </tr>
        <tr style="height: 28px;">
            <td style="width: 17.5%; height: 28px; vertical-align: middle;">Branch on Equal</td>
            <td style="width: 7.5%; height: 28px; vertical-align: middle;"><code class="mips">beq</code></td>
            <td style="width: 20%; height: 28px; vertical-align: middle;"><code class="mips">beq $rs, $rt, imm</code></td>
            <td style="width: 35%; height: 28px; vertical-align: middle;"><code class="mips">if(R[rs] == R[rt])</code><br><code class="mips">&nbsp; PC=PC+4+BranchAddr</code><br><code class="mips">else</code><br><code class="mips">&nbsp; PC=PC+4</code></td>
            <td style="width: 5%; height: 28px; vertical-align: middle;"><p>I / (4)</p></td>
            <td style="width: 5%; height: 28px; vertical-align: middle;">4<sub>hex</sub></td>
        </tr>
        <tr style="height: 28px;">
            <td style="width: 17.5%; height: 28px; vertical-align: middle;">Branch on Not Equal</td>
            <td style="width: 7.5%; height: 28px; vertical-align: middle;"><code class="mips">bne</code></td>
            <td style="width: 20%; height: 28px; vertical-align: middle;"><code class="mips">bne $rs, $rt, imm</code></td>
            <td style="width: 35%; height: 28px; vertical-align: middle;"><code class="mips">if(R[rs] != R[rt])</code><br><code class="mips">&nbsp; PC=PC+4+BranchAddr</code><br><code class="mips">else</code><br><code class="mips">&nbsp; PC=PC+4</code></td>
            <td style="width: 5%; height: 28px; vertical-align: middle;">I / (4)</td>
            <td style="width: 5%; height: 28px; vertical-align: middle;">5<sub>hex</sub></td>
        </tr>
        <tr style="height: 28px;">
            <td style="width: 17.5%; height: 28px; vertical-align: middle;">Jump</td>
            <td style="width: 7.5%; height: 28px; vertical-align: middle;"><code class="mips">j</code></td>
            <td style="width: 20%; height: 28px; vertical-align: middle;"><code class="mips">j address</code> or <code class="mips">j label</code></td>
            <td style="width: 35%; height: 28px; vertical-align: middle;"><code class="mips">PC=JumpAddr</code></td>
            <td style="width: 5%; height: 28px; vertical-align: middle;">J / (5)</td>
            <td style="width: 5%; height: 28px; vertical-align: middle;">2<sub>hex</sub></td>
        </tr>
        <tr style="height: 28px;">
            <td style="width: 17.5%; height: 28px; vertical-align: middle;">Jump and Link</td>
            <td style="width: 7.5%; height: 28px; vertical-align: middle;"><code class="mips">jal</code></td>
            <td style="width: 20%; height: 28px; vertical-align: middle;"><code class="mips">jal address</code> or <code class="mips">jal label</code></td>
            <td style="width: 35%; height: 28px; vertical-align: middle;"><code class="mips">R[31]=PC+4;</code> <code class="mips">PC=JumpAddr</code></td>
            <td style="width: 5%; height: 28px; vertical-align: middle;">J / (5)</td>
            <td style="width: 5%; height: 28px; vertical-align: middle;">3<sub>hex</sub></td>
        </tr>
        <tr style="height: 28px;">
            <td style="width: 17.5%; height: 28px; vertical-align: middle;">Jump Register</td>
            <td style="width: 7.5%; height: 28px; vertical-align: middle;"><code class="mips">jr</code></td>
            <td style="width: 20%; height: 28px; vertical-align: middle;"><code class="mips">jr $rs</code></td>
            <td style="width: 35%; height: 28px; vertical-align: middle;"><code class="mips">PC=R[rs]</code></td>
            <td style="width: 5%; height: 28px; vertical-align: middle;">R</td>
            <td style="width: 5%; height: 28px; vertical-align: middle;">0 / 08<sub>hex</sub></td>
        </tr>
        <tr>
            <td style="width: 17.5%; vertical-align: middle;">Load Byte&nbsp;</td>
            <td style="width: 7.5%; vertical-align: middle;"><code class="mips">lb</code></td>
            <td style="width: 20%; vertical-align: middle;"><code class="mips">lb $rt, imm($rs)</code></td>
            <td style="width: 35%; vertical-align: middle;"><code class="mips">R[rt]={ {24{M[R[rs]+SignExtImm](7)}}, M[R[rs]+SignExtImm](7:0)};</code> <code class="mips">PC=PC+4</code></td>
            <td style="width: 5%; vertical-align: middle;">I / (2)</td>
            <td style="width: 5%; vertical-align: middle;">20<sub>hex</sub></td>
        </tr>
        <tr>
            <td style="width: 17.5%; vertical-align: middle;">Load Byte Unsigned</td>
            <td style="width: 7.5%; vertical-align: middle;"><code class="mips">lbu</code></td>
            <td style="width: 20%; vertical-align: middle;"><code class="mips">lbu $rt, imm($rs)</code></td>
            <td style="width: 35%; vertical-align: middle;"><code class="mips">R[rt]={24â€™b0, M[R[rs]+SignExtImm](7:0)};</code> <code class="mips">PC=PC+4</code></td>
            <td style="width: 5%; vertical-align: middle;">I / (2)</td>
            <td style="width: 5%; vertical-align: middle;">24<sub>hex</sub></td>
        </tr>
        <tr>
            <td style="width: 17.5%; vertical-align: middle;">Load Halfword&nbsp;</td>
            <td style="width: 7.5%; vertical-align: middle;"><code class="mips">lh</code></td>
            <td style="width: 20%; vertical-align: middle;"><code class="mips">lh $rt, imm($rs)</code></td>
            <td style="width: 35%; vertical-align: middle;"><code class="mips">R[rt]={ {26{M[R[rs]+SignExtImm](15)}}, M[R[rs]+SignExtImm](15:0)};</code> <code class="mips">PC=PC+4</code></td>
            <td style="width: 5%; vertical-align: middle;">I / (2)</td>
            <td style="width: 5%; vertical-align: middle;">21<sub>hex</sub></td>
        </tr>
        <tr>
            <td style="width: 17.5%; vertical-align: middle;">Load Halfword Unsigned</td>
            <td style="width: 7.5%; vertical-align: middle;"><code class="mips">lhu</code></td>
            <td style="width: 20%; vertical-align: middle;"><code class="mips">lhu $rt, imm($rs)</code></td>
            <td style="width: 35%; vertical-align: middle;"><code class="mips">R[rt]={16â€™b0,M[R[rs]+SignExtImm](15:0)};</code> <code class="mips">PC=PC+4</code></td>
            <td style="width: 5%; vertical-align: middle;">I / (2)</td>
            <td style="width: 5%; vertical-align: middle;">25<sub>hex</sub></td>
        </tr>
        <tr>
            <td style="width: 17.5%; vertical-align: middle;">Load Upper Imm</td>
            <td style="width: 7.5%; vertical-align: middle;"><code class="mips">lui</code></td>
            <td style="width: 20%; vertical-align: middle;"><code class="mips">lui $rt, imm</code></td>
            <td style="width: 35%; vertical-align: middle;"><code class="mips">R[rt]={imm, 16'b0};</code> <code class="mips">PC=PC+4</code></td>
            <td style="width: 5%; vertical-align: middle;">I</td>
            <td style="width: 5%; vertical-align: middle;">f<sub>hex</sub></td>
        </tr>
        <tr>
            <td style="width: 17.5%; vertical-align: middle;">Load Word</td>
            <td style="width: 7.5%; vertical-align: middle;"><code class="mips">lw</code></td>
            <td style="width: 20%; vertical-align: middle;"><code class="mips">lw $rt, imm($rs)</code></td>
            <td style="width: 35%; vertical-align: middle;"><code class="mips">R[rt]=M[R[rs]+SignExtImm];</code> <code class="mips">PC=PC+4</code></td>
            <td style="width: 5%; vertical-align: middle;">I / (2)</td>
            <td style="width: 5%; vertical-align: middle;">23<sub>hex</sub></td>
        </tr>
        <tr>
            <td style="width: 17.5%; vertical-align: middle;">Move From Coprocessor 0</td>
            <td style="width: 7.5%; vertical-align: middle;"><code class="mips">mfc0</code></td>
            <td style="width: 20%; vertical-align: middle;"><code class="mips">mfc0 $rt, $rd</code></td>
            <td style="width: 35%; vertical-align: middle;"><code class="mips">R[rt]=CPR[0,rd];</code> <code class="mips">PC=PC+4</code> (<code class="mips">$rs = 0</code>)&nbsp;</td>
            <td style="width: 5%; vertical-align: middle;">R</td>
            <td style="width: 5%; vertical-align: middle;">10<sub>hex</sub> / 0</td>
        </tr>
        <tr>
            <td style="width: 17.5%; vertical-align: middle;">Move To Coprocessor 0</td>
            <td style="width: 7.5%; vertical-align: middle;"><code class="mips">mtc0</code></td>
            <td style="width: 20%; vertical-align: middle;"><code class="mips">mtc0 $rt, $rd</code></td>
            <td style="width: 35%; vertical-align: middle;"><code class="mips">CPR[0,rd]=R[rt];</code> <code class="mips">PC=PC+4</code> (<code class="mips">$rs = 4</code>)</td>
            <td style="width: 5%; vertical-align: middle;">R</td>
            <td style="width: 5%; vertical-align: middle;">10<sub>hex</sub> / 0</td>
        </tr>
        <tr>
            <td style="width: 17.5%; vertical-align: middle;">Nor</td>
            <td style="width: 7.5%; vertical-align: middle;"><code class="mips">nor</code></td>
            <td style="width: 20%; vertical-align: middle;"><code class="mips">nor $rd, $rs, $rt</code></td>
            <td style="width: 35%; vertical-align: middle;"><code class="mips">R[rd]=~(R[rs] | R[rt]);</code> <code class="mips">PC=PC+4</code></td>
            <td style="width: 5%; vertical-align: middle;">R</td>
            <td style="width: 5%; vertical-align: middle;">0 / 27<sub>hex</sub></td>
        </tr>
        <tr>
            <td style="width: 17.5%; vertical-align: middle;">Or</td>
            <td style="width: 7.5%; vertical-align: middle;"><code class="mips">or</code></td>
            <td style="width: 20%; vertical-align: middle;"><code class="mips">or $rd, $rs, $rt</code></td>
            <td style="width: 35%; vertical-align: middle;"><code class="mips">R[rd]=R[rs] | R[rt];</code> <code class="mips">PC=PC+4</code></td>
            <td style="width: 5%; vertical-align: middle;">R</td>
            <td style="width: 5%; vertical-align: middle;">0 / 25<sub>hex</sub></td>
        </tr>
        <tr>
            <td style="width: 17.5%; vertical-align: middle;">Or Immediate</td>
            <td style="width: 7.5%; vertical-align: middle;"><code class="mips">ori</code></td>
            <td style="width: 20%; vertical-align: middle;"><code class="mips">ori $rt, $rs, imm</code></td>
            <td style="width: 35%; vertical-align: middle;"><code class="mips">R[rt]=R[rs] | ZeroExtImm;</code> <code class="mips">PC=PC+4</code></td>
            <td style="width: 5%; vertical-align: middle;">I / (3)</td>
            <td style="width: 5%; vertical-align: middle;">d<sub>hex</sub></td>
        </tr>
        <tr>
            <td style="width: 17.5%; vertical-align: middle;">Set if Less Than</td>
            <td style="width: 7.5%; vertical-align: middle;"><code class="mips">slt</code></td>
            <td style="width: 20%; vertical-align: middle;"><code class="mips">slt $rd, $rs, $rt</code></td>
            <td style="width: 35%; vertical-align: middle;"><code class="mips">R[rd]=(R[rs]&lt;R[rt]) ? 1 : 0;</code> <code class="mips">PC=PC+4</code></td>
            <td style="width: 5%; vertical-align: middle;">R</td>
            <td style="width: 5%; vertical-align: middle;">0 / 2a<sub>hex</sub></td>
        </tr>
        <tr>
            <td style="width: 17.5%; vertical-align: middle;">Set if Less Than Immediate</td>
            <td style="width: 7.5%; vertical-align: middle;"><code class="mips">slti</code></td>
            <td style="width: 20%; vertical-align: middle;"><code class="mips">slti $rt, $rs, imm</code></td>
            <td style="width: 35%; vertical-align: middle;"><code class="mips">R[rt]=(R[rs]&lt;SignExtImm) ? 1 : 0;</code> <code class="mips">PC=PC+4</code></td>
            <td style="width: 5%; vertical-align: middle;">I / (2)</td>
            <td style="width: 5%; vertical-align: middle;">a<sub>hex</sub></td>
        </tr>
        <tr>
            <td style="width: 17.5%; vertical-align: middle;">Set if Less Than Immediate Unsigned</td>
            <td style="width: 7.5%; vertical-align: middle;"><code class="mips">sltiu</code></td>
            <td style="width: 20%; vertical-align: middle;"><code class="mips">sltiu $rt, $rs, imm</code></td>
            <td style="width: 35%; vertical-align: middle;"><code class="mips">R[rt]=(R[rs]&lt;SignExtImm) ? 1 : 0;</code> <code class="mips">PC=PC+4</code></td>
            <td style="width: 5%; vertical-align: middle;">I / (2, 6)</td>
            <td style="width: 5%; vertical-align: middle;">b<sub>hex</sub></td>
        </tr>
        <tr>
            <td style="width: 17.5%; vertical-align: middle;">Set if Less Than Unsigned</td>
            <td style="width: 7.5%; vertical-align: middle;"><code class="mips">sltu</code></td>
            <td style="width: 20%; vertical-align: middle;"><code class="mips">sltu $rd, $rs, $rt</code></td>
            <td style="width: 35%; vertical-align: middle;"><code class="mips">R[rd]=(R[rs]&lt;R[rt]) ? 1 : 0;</code> <code class="mips">PC=PC+4</code></td>
            <td style="width: 5%; vertical-align: middle;">R / (6)</td>
            <td style="width: 5%; vertical-align: middle;">0 / 2b<sub>hex</sub></td>
        </tr>
        <tr>
            <td style="width: 17.5%; vertical-align: middle;">Shift Left Logical</td>
            <td style="width: 7.5%; vertical-align: middle;"><code class="mips">sll</code></td>
            <td style="width: 20%; vertical-align: middle;"><code class="mips">sll $rd, $rt, shamt</code></td>
            <td style="width: 35%; vertical-align: middle;"><code class="mips">R[rd]=R[rt]&lt;&lt;shamt;</code> <code class="mips">PC=PC+4</code></td>
            <td style="width: 5%; vertical-align: middle;">R</td>
            <td style="width: 5%; vertical-align: middle;">0 / 00<sub>hex</sub></td>
        </tr>
        <tr>
            <td style="width: 17.5%; vertical-align: middle;">Shift Right Arithmetic</td>
            <td style="width: 7.5%; vertical-align: middle;"><code class="mips">sra</code></td>
            <td style="width: 20%; vertical-align: middle;"><code class="mips">sra $rd, $rt, shamt</code></td>
            <td style="width: 35%; vertical-align: middle;"><code class="mips">R[rd]=R[rt]&gt;&gt;shamt;</code> (arithmetic) <code class="mips">PC=PC+4</code></td>
            <td style="width: 5%; vertical-align: middle;">R</td>
            <td style="width: 5%; vertical-align: middle;">0 / 03<sub>hex</sub></td>
        </tr>
        <tr>
            <td style="width: 17.5%; vertical-align: middle;">Shift Right Logical</td>
            <td style="width: 7.5%; vertical-align: middle;"><code class="mips">srl</code></td>
            <td style="width: 20%; vertical-align: middle;"><code class="mips">srl $rd, $rt, shamt</code></td>
            <td style="width: 35%; vertical-align: middle;"><code class="mips">R[rd]=R[rt]&gt;&gt;shamt;</code> (logical) <code class="mips">PC=PC+4</code></td>
            <td style="width: 5%; vertical-align: middle;">R</td>
            <td style="width: 5%; vertical-align: middle;">0 / 02<sub>hex</sub></td>
        </tr>
        <tr>
            <td style="width: 17.5%; vertical-align: middle;">Store Byte</td>
            <td style="width: 7.5%; vertical-align: middle;"><code class="mips">sb</code></td>
            <td style="width: 20%; vertical-align: middle;"><code class="mips">sb $rt, imm($rs)</code></td>
            <td style="width: 35%; vertical-align: middle;"><code class="mips">M[R[rs]+SignExtImm](7:0)=R[rt](7:0);</code> <code class="mips">PC=PC+4</code></td>
            <td style="width: 5%; vertical-align: middle;">I / (2)</td>
            <td style="width: 5%; vertical-align: middle;">28<sub>hex</sub></td>
        </tr>
        <tr>
            <td style="width: 17.5%; vertical-align: middle;">Store Halfword</td>
            <td style="width: 7.5%; vertical-align: middle;"><code class="mips">sh</code></td>
            <td style="width: 20%; vertical-align: middle;"><code class="mips">sh $rt, imm($rs)</code></td>
            <td style="width: 35%; vertical-align: middle;"><code class="mips">M[R[rs]+SignExtImm](15:0)=R[rt](15:0);</code> <code class="mips">PC=PC+4</code></td>
            <td style="width: 5%; vertical-align: middle;">I / (2)</td>
            <td style="width: 5%; vertical-align: middle;">29<sub>hex</sub></td>
        </tr>
        <tr>
            <td style="width: 17.5%; vertical-align: middle;">Store Word</td>
            <td style="width: 7.5%; vertical-align: middle;"><code class="mips">sw</code></td>
            <td style="width: 20%; vertical-align: middle;"><code class="mips">sw $rt, imm($rs)</code></td>
            <td style="width: 35%; vertical-align: middle;"><code class="mips">M[R[rs]+SignExtImm]=R[rt];</code> <code class="mips">PC=PC+4</code></td>
            <td style="width: 5%; vertical-align: middle;">I / (2)</td>
            <td style="width: 5%; vertical-align: middle;">2b<sub>hex</sub></td>
        </tr>
        <tr>
            <td style="width: 17.5%; vertical-align: middle;">Subtract</td>
            <td style="width: 7.5%; vertical-align: middle;"><code class="mips">sub</code></td>
            <td style="width: 20%; vertical-align: middle;"><code class="mips">sub $rd, $rs, $rt</code></td>
            <td style="width: 35%; vertical-align: middle;"><code class="mips">R[rd]=R[rs]-R[rt];</code> <code class="mips">PC=PC+4</code></td>
            <td style="width: 5%; vertical-align: middle;">R / (1)</td>
            <td style="width: 5%; vertical-align: middle;">0 / 22<sub>hex</sub></td>
        </tr>
        <tr>
            <td style="width: 17.5%; vertical-align: middle;">Subtract Unsigned</td>
            <td style="width: 7.5%; vertical-align: middle;"><code class="mips">subu</code></td>
            <td style="width: 20%; vertical-align: middle;"><code class="mips">subu $rd, $rs, $rt</code></td>
            <td style="width: 35%; vertical-align: middle;"><code class="mips">R[rd]=R[rs]-R[rt];</code> <code class="mips">PC=PC+4</code></td>
            <td style="width: 5%; vertical-align: middle;">R</td>
            <td style="width: 5%; vertical-align: middle;">0 / 23<sub>hex</sub></td>
        </tr>
        <tr>
            <td style="width: 17.5%; vertical-align: middle;">Xor</td>
            <td style="width: 7.5%; vertical-align: middle;"><code class="mips">xor</code></td>
            <td style="width: 20%; vertical-align: middle;"><code class="mips">xor $rd, $rs, $rt</code></td>
            <td style="width: 35%; vertical-align: middle;"><code class="mips">R[rd]=R[rs]^R[rt];</code> <code class="mips">PC=PC+4</code></td>
            <td style="width: 5%; vertical-align: middle;">R</td>
            <td style="width: 5%; vertical-align: middle;">0 / 26<sub>hex</sub></td>
        </tr>
        <tr>
            <td style="width: 17.5%; vertical-align: middle;">Xor Immediate</td>
            <td style="width: 7.5%; vertical-align: middle;"><code class="mips">xori</code></td>
            <td style="width: 20%; vertical-align: middle;"><code class="mips">xori $rt, $rs, imm</code></td>
            <td style="width: 35%; vertical-align: middle;"><code class="mips">R[rt]=R[rs]^ZeroExtImm;</code> <code class="mips">PC=PC+4</code></td>
            <td style="width: 5%; vertical-align: middle;">I / (3)</td>
            <td style="width: 5%; vertical-align: middle;">e<sub>hex</sub></td>
        </tr>
    </tbody>
</table>
<ol>
    <li>May cause overflow exception</li>
    <li><code class="mips">SignExtImm = { {16{inst[15]}}, inst[15:0] }</code></li>
    <li><code class="mips">ZeroExtImm = { {16{1'b0}}, inst[15:0] }</code></li>
    <li><code class="mips">BranchAddr = { {14{immediate[15]}}, immediate, 2'b0 }</code></li>
    <li><code class="mips">JumpAddr = { PC+4[31:28], address, 2'b0 }</code></li>
    <li>Operands considered unsigned numbers (vs. 2's complement)</li>
    <li>Atomic test &amp; set pair; <code class="mips">R[rt] = 1</code> if pair atomic, <code class="mips">0</code> if not atomic</li>
</ol>
<h2>How to Read the Core Instructions Table</h2>
<p>The NAME, MNEMONIC columns tell you a descriptive name (add or add immediate) and a short mnemonic that you will use in your assembly programs (<code class="mips">add</code> or <code class="mips">addi</code>).</p>
<p>The FORMAT column tells you what basic instruction format the instruction uses for its machine code. See next section for more information on instruction formats.</p>
<p>The OPERATION column provides a Verilog description of what the instruction should ultimately implement. Values on the right are taken from immediately before the positive clock edge and are assigned to the value on the left immediately after the next positive clock edge. <code class="mips">R[ ]</code> refers to the contents of a register in the register file. <code class="mips">M[ ]</code> refers to the contents of a memory address in the data memory. <code class="mips">PC</code> refers to the Program Counter's contents. All other signal names are explained in the footnotes indicated by the numbers in parentheses. Reminder: Curly braces (i.e., <code class="mips">{ }</code>) are used for concatenating wires into a bus.</p>
<p>The OPCODE/FUNCT column has either one or two numbers represented in 6-bit hexadecimal (i.e., 0 means 00 0000 and 20<sub>hex&nbsp;</sub>means 10 0000). If the instruction format is R, then the first number is the 6-bit opcode and the second number is the 6-bit funct code. If the instruction format is I or J, then the number is the 6-bit opcode - these instruction formats do not have a funct code.</p>

<p>You will need to know only these three basic instruction formats. All MIPS instructions are encoded as 32-bit pieces of data that can be parsed into smaller fields. The names of the fields and which bits are allocated to each field are shown in the figure. One important thing to notice is that the order of fields in the instruction formats do not match the order of fields in the Verilog or MIPS assembly. For example, if you had the instruction <code class="mips">add $5, $3, $8</code>, you would be assigning your data to <code class="mips">R[5]</code>. The <code class="mips">add</code> instruction's Verilog is <code class="mips">R[rd] = R[rs] + R[rt]</code>. Consequently, <code class="mips">$5</code> is <code class="mips">rd</code>, <code class="mips">$3</code> is <code class="mips">rs</code>, and <code class="mips">$8</code> is <code class="mips">rt</code>, so that the Verilog and assembly mnemonic match.</p>

<h2>Notes on Assembly Format Norms</h2>
<ul>
    <li><code class="mips">$r<strong>s</strong></code> is a <strong>s</strong>ource register exclusively, <code class="mips">$r<strong>d</strong></code> is a <strong>d</strong>estination register exclusively, <code class="mips">$r<strong>t</strong></code> <strong>t</strong>ransitions between being a source and a destination register</li>
    <li>Assignment generally goes to the left for instructions that do not use the data memory (e.g., <code class="mips">add $rd, $rs, $rt</code> is assigning to <code class="mips">$rd</code>. <code class="mips">lui $rt, imm</code> is assigning to <code class="mips">$rt</code>)</li>
    <li>If multiple registers are used as sources, <code class="mips">$rs</code> is listed first, <code class="mips">$rt</code> is listed second (e.g., <code class="mips">or $rd, $rs, $rt</code> has two sources as does <code class="mips">beq $rs, $rt, imm</code>)</li>
    <li>Any instruction that reads from (e.g., <code class="mips">lb</code> or <code class="mips">lw</code>), or writes to (e.g., <code class="mips">sb</code> or <code class="mips">sw</code>), data memory treats <code class="mips">R[rs]</code> as a base address pointer and <code class="mips">imm</code> as an offset from that base pointer. This <strong>base+offset</strong> behavior is indicated by the <code class="mips">imm($rs)</code> notation, where the address of the data to be read from or written to in data memory is always <code class="mips">R[rs]+SignExtImm</code>. Consequently, all data memory instructions use the <code class="mips">$rt, imm($rs)</code> format. <code class="mips">$rt</code> transitions from being a source or a destination.</li>
</ul>
<h2>Converting MIPS Assembly to Machine Code</h2>
<ol>
    <li>Find the MIPS assembly instruction in the Core Instruction Set table</li>
    <li>Use the second-to-last column to identify the instruction's machine code format. The format will be either R, I, or J. Use the Basic Instruction Format figures to identify the fields you need for that instruction format.</li>
    <li>If it's I-type or J-type format, use the last column to find the opcode (e.g., <code class="mips">andi</code> has opcode c<sub>hex</sub> and <code class="mips">jal</code> has opcode 3<sub>hex</sub>) and convert the hexadecimal opcode to 6-bit unsigned binary (e.g., e<sub>hex</sub> becomes 001110 and 23<sub>hex</sub> becomes 100011).&nbsp; If it's R-type format, use the last column to find the opcode (first number) and funct code (second number) (e.g., <code class="mips">jr</code> has opcode 0 and funct code 08<sub>hex</sub> and <code class="mips">mfc0</code> has opcode 10<sub>hex</sub> and funct code 0) and convert both to 6-bit unsigned binary.</li>
    <li>If it's J-type format, take the 32-bit instruction memory address signified by the label, strip off the 4 most-significant bits (they will be added back in by <code class="mips">PC+4[31:28]</code>) and strip off the 2 least-significant bits (they will be added back in by <code class="mips">2'b0</code>), leaving you with the 26-bit address field for the J-type instruction.</li>
    <li>If it's I-type or R-type format, use the Assembly Format column to map the fields of the assembly code to the fields of the instruction format. Convert <code class="mips">$rs</code>, <code class="mips">$rt</code>, <code class="mips">$rd</code>, and <code class="mips">shamt</code> fields into 5-bit unsigned binary (e.g., <code class="mips">$rs</code> = <code class="mips">$6</code> becomes 00110 and <code class="mips">shamt</code> = 12 becomes 01100). Convert the immediate field into 16-bit 2's complement representation (e.g., imm = 24 becomes 0000 0000 0001 1000 and imm = -1 becomes 1111 1111 1111 1111). Any field that is not specified by the Assembly Format column should be all 0s (e.g., <code class="mips">shamt</code> should 00000 for <code class="mips">add</code> and <code class="mips">rs</code> should be 00000 for <code class="mips">lui</code>).</li>
    <li>Concatenate all of the fields of your instruction format together as shown in the Basic Instruction Formats diagram. Example: <code class="mips">or $8, $15, $20</code> is an R-type instruction with opcode = 000000 (0<sub>hex</sub>), funct code = 100101 (25<sub>hex</sub>), <code class="mips">$rs</code> = <code class="mips">$15</code> = 01111, <code class="mips">$rt</code> = <code class="mips">$20</code> = 10100, <code class="mips">$rd</code> = <code class="mips">$8</code> = 01000, <code class="mips">shamt</code> = 00000, so the machine code would be 000000 01111 10100 01000 00000 100101.</li>
</ol>

<h4>Examples</h4>
<p><code class="mips">add $5, $3, $8</code> maps to machine code 000000&nbsp; &nbsp;00011&nbsp; &nbsp; 01000&nbsp; &nbsp; 00101&nbsp; &nbsp;00000&nbsp; &nbsp;100000</p>
<p><code class="mips">addi $5, $3, -8</code> maps to machine code 001000&nbsp; &nbsp;00011&nbsp; &nbsp; 00101&nbsp; &nbsp; 1111111111111000</p>
<p><code class="mips">j 0x0000000c</code> maps to machine code 000010&nbsp; &nbsp;00000000000000000000000011</p>


<h2>Mark as read</h2>
<fieldset class="d-block"><legend class="visually-hidden">Checkbox options</legend>

    <div class="form-check d-flex align-items-center py-1 gap-2">
        <input class="form-check-input mt-0 flex-shrink-0" type="checkbox" name="read" value="a" id="read-a">

        <label class="form-check-label d-flex align-items-center" for="read-a">
            <div class="pl-checkbox-key-label">(a)</div>
            <div class="ml-1 mr-1 pl-checkbox-answer ms-1 me-1">I've read this!</div>
        </label>

            
    </div>
    
<span class="form-inline d-flex flex-row flex-wrap align-items-center">
    <span class="input-group pl-checkbox">
        <span> <small class="form-text text-muted">Select all possible options that apply.</small> </span>
        <button type="button" class="btn btn-light btn-sm" data-toggle="popover" data-html="true" data-content="You must select at least 1 option. You will receive a score of 100% if you select all options that are true and no options that are false. Otherwise, you will receive a score of 0%." data-placement="auto" data-bs-content="You must select at least 1 option. You will receive a score of 100% if you select all options that are true and no options that are false. Otherwise, you will receive a score of 0%." data-bs-html="true" data-bs-placement="auto" data-bs-toggle="popover" aria-label="Checkbox" data-bs-original-title="Checkbox">
            <svg class="svg-inline--fa fa-circle-question" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="circle-question" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg=""><path fill="currentColor" d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM169.8 165.3c7.9-22.3 29.1-37.3 52.8-37.3l58.3 0c34.9 0 63.1 28.3 63.1 63.1c0 22.6-12.1 43.5-31.7 54.8L280 264.4c-.2 13-10.9 23.6-24 23.6c-13.3 0-24-10.7-24-24l0-13.5c0-8.6 4.6-16.5 12.1-20.8l44.3-25.4c4.7-2.7 7.6-7.7 7.6-13.1c0-8.4-6.8-15.1-15.1-15.1l-58.3 0c-3.4 0-6.4 2.1-7.5 5.3l-.4 1.2c-4.4 12.5-18.2 19-30.6 14.6s-19-18.2-14.6-30.6l.4-1.2zM224 352a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"></path></svg><!-- <i class="fa fa-question-circle" aria-hidden="true"></i> Font Awesome fontawesome.com -->
        </button>
    </span>
</span>






</fieldset></div>
      
      <div class="card-footer" id="question-panel-footer">
        <input type="hidden" name="__csrf_token" value="YWE4Nzk1NGQwNGY1MzhkN2Y0ZDNjZWFkZGZmYzQ2OTI4MjRkNDJjOWYwZWIxYmY4ZGI3NTY3Y2Y0MTRiOTM3OA.m56ajfte.eyJ1cmwiOiIvcGwvY291cnNlX2luc3RhbmNlLzE2MjQ0NS9pbnN0YW5jZV9xdWVzdGlvbi80NTEwNTI2MDcvIiwiYXV0aG5fdXNlcl9pZCI6IjQ1MDI5MzkifQ">
        <div id="question-panel-footer-content">
      <div class="row">
        <div class="col d-flex justify-content-between">
          <span class="d-flex align-items-center">
            
                  <button class="btn btn-info question-save disable-on-submit order-2" name="__action" value="save">
                    Save only
                  </button>
                
            
                  <button class="btn btn-primary question-grade disable-on-submit order-1 mr-1 me-1" name="__action" value="grade">
                    Save &amp; Grade
                    <small class="font-italic ml-2 ms-2 fst-italic">Unlimited attempts</small>
                  </button>
                
            
          </span>
          <span class="d-flex">
             <input type="hidden" name="__variant_id" value="112038053"> 
            
            
          </span>
        </div>
      </div>
      
    </div>
      </div>
    
    </div>
  
            </form>
          

      <div class="card mb-4 grading-block d-none">
        <div class="card-header bg-secondary text-white">
          <h2>Correct answer</h2>
        </div>
        <div class="card-body answer-body"></div>
      </div>

      
    </div>
    
  
            </div>

            <div class="col-lg-3 col-sm-12">
              
    <div class="card mb-4" id="assessment-score-panel">
      <div class="card-header bg-secondary">
        <h2>
          <a class="text-white" href="https://us.prairielearn.com/pl/course_instance/162445/assessment_instance/9118087/">
            PRE 07
          </a>
        </h2>
      </div>
      <div class="card-body">
        <div class="d-flex justify-content-center">
          <a class="btn btn-info" href="https://us.prairielearn.com/pl/course_instance/162445/assessment_instance/9118087/">
            Assessment overview
          </a>
        </div>
      </div>
      <table class="table table-sm" aria-label="Assessment score">
        <tbody>
          <tr>
            <td>Total points:</td>
            <td>
              0/80
            </td>
          </tr>
          <tr>
            <td>Score:</td>
            <td class="align-middle">
    <div class="progress border border-success " style="min-width: 5em; max-width: 20em;">
      <div class="progress-bar bg-success" style="width: 0%">
        
      </div>
      <div class="d-flex flex-column justify-content-center text-center" style="width: 100%">
        0%
      </div>
    </div>
  </td>
          </tr>
        </tbody>
      </table>
    </div>
  
              
    <div class="card mb-4" id="question-score-panel">
      <div class="card-header bg-secondary text-white">
        <h2>Question PRE07.1</h2>
      </div>
      
    <table class="table table-sm two-column-description-no-header" aria-label="Question score" id="question-score-panel-content">
      <tbody>
        
        
              
                      <tr>
                        <td>Value:</td>
                        <td>
    1
    <button type="button" class="btn btn-xs js-value-popover" data-toggle="popover" data-container="body" data-html="true" data-content="
        &lt;p&gt;
          This question awards partial credit if you continue getting closer to the correct answer.
        &lt;/p&gt;
      
        &lt;p&gt;
          If you score 100% on your next submission, you will be awarded an additional
          1 point.
        &lt;/p&gt;
      
        &lt;p class=&quot;mb-0&quot;&gt;
          If you score less than 100% on your next submission, you will be awarded an additional
          &lt;code&gt;1 * score / 100&lt;/code&gt; points.
        &lt;/p&gt;
      " data-placement="auto" data-bs-container="body" data-bs-content="
        &lt;p&gt;
          This question awards partial credit if you continue getting closer to the correct answer.
        &lt;/p&gt;
      
        &lt;p&gt;
          If you score 100% on your next submission, you will be awarded an additional
          1 point.
        &lt;/p&gt;
      
        &lt;p class=&quot;mb-0&quot;&gt;
          If you score less than 100% on your next submission, you will be awarded an additional
          &lt;code&gt;1 * score / 100&lt;/code&gt; points.
        &lt;/p&gt;
      " data-bs-html="true" data-bs-placement="auto" data-bs-toggle="popover">
      <svg class="svg-inline--fa fa-circle-question" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="circle-question" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg=""><path fill="currentColor" d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM169.8 165.3c7.9-22.3 29.1-37.3 52.8-37.3l58.3 0c34.9 0 63.1 28.3 63.1 63.1c0 22.6-12.1 43.5-31.7 54.8L280 264.4c-.2 13-10.9 23.6-24 23.6c-13.3 0-24-10.7-24-24l0-13.5c0-8.6 4.6-16.5 12.1-20.8l44.3-25.4c4.7-2.7 7.6-7.7 7.6-13.1c0-8.4-6.8-15.1-15.1-15.1l-58.3 0c-3.4 0-6.4 2.1-7.5 5.3l-.4 1.2c-4.4 12.5-18.2 19-30.6 14.6s-19-18.2-14.6-30.6l.4-1.2zM224 352a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"></path></svg><!-- <i class="fa fa-question-circle" aria-hidden="true"></i> Font Awesome fontawesome.com -->
    </button>
  </td>
                      </tr>
                    
              
            
        
        <tr>
          <td>Total points:</td>
          <td>
            
    <span class="text-nowrap">
      â€”
      <small>/<span class="text-muted">1</span></small>
    </span>
  
          </td>
        </tr>
        
              <tr>
                <td colspan="2" class="text-right">
                  <small>
                    Auto-graded question
                  </small>
                </td>
              </tr>
            
      </tbody>
    </table>
  
      
    </div>
  
              
    <div class="text-center mb-2">
      
      <button id="question-nav-prev" class="btn btn-primary mb-3 disabled" disabled="">
        Previous question
      </button>
    
      
    <a id="question-nav-next" class="btn btn-primary mb-3" href="https://us.prairielearn.com/pl/course_instance/162445/instance_question/451052608/">
      Next question
    </a>
  
    </div>
  
              
    <div class="card mb-4" id="attach-file-panel">
      <div class="card-header bg-secondary text-white d-flex align-items-center">
        <svg class="svg-inline--fa fa-paperclip" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="paperclip" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M364.2 83.8c-24.4-24.4-64-24.4-88.4 0l-184 184c-42.1 42.1-42.1 110.3 0 152.4s110.3 42.1 152.4 0l152-152c10.9-10.9 28.7-10.9 39.6 0s10.9 28.7 0 39.6l-152 152c-64 64-167.6 64-231.6 0s-64-167.6 0-231.6l184-184c46.3-46.3 121.3-46.3 167.6 0s46.3 121.3 0 167.6l-176 176c-28.6 28.6-75 28.6-103.6 0s-28.6-75 0-103.6l144-144c10.9-10.9 28.7-10.9 39.6 0s10.9 28.7 0 39.6l-144 144c-6.7 6.7-6.7 17.7 0 24.4s17.7 6.7 24.4 0l176-176c24.4-24.4 24.4-64 0-88.4z"></path></svg><!-- <i class="fas fa-paperclip"></i> Font Awesome fontawesome.com -->
        <h2>&nbsp;Personal Notes</h2>
      </div>
      <div class="card-body"><i>No attached notes</i></div>
      
            <div class="card-footer">
              
                      
    <div>
      <button class="btn btn-xs btn-secondary" type="button" data-toggle="collapse" data-target="#attachFileCollapse" aria-expanded="false" aria-controls="attachFileCollapse" data-bs-target="#attachFileCollapse" data-bs-toggle="collapse">
        Attach a file <svg class="svg-inline--fa fa-square-caret-down" aria-hidden="true" focusable="false" data-prefix="far" data-icon="square-caret-down" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M384 432c8.8 0 16-7.2 16-16l0-320c0-8.8-7.2-16-16-16L64 80c-8.8 0-16 7.2-16 16l0 320c0 8.8 7.2 16 16 16l320 0zm64-16c0 35.3-28.7 64-64 64L64 480c-35.3 0-64-28.7-64-64L0 96C0 60.7 28.7 32 64 32l320 0c35.3 0 64 28.7 64 64l0 320zM224 352c-6.7 0-13-2.8-17.6-7.7l-104-112c-6.5-7-8.2-17.2-4.4-25.9s12.5-14.4 22-14.4l208 0c9.5 0 18.2 5.7 22 14.4s2.1 18.9-4.4 25.9l-104 112c-4.5 4.9-10.9 7.7-17.6 7.7z"></path></svg><!-- <i class="far fa-caret-square-down"></i> Font Awesome fontawesome.com -->
      </button>
      <div class="collapse" id="attachFileCollapse">
        <form class="attach-file-form mb-3" name="attach-file-form" method="POST" enctype="multipart/form-data">
          <p class="small mt-3">
            Attached files will be saved here for your reference. These files act as personal notes
            and can be used for your own review purposes. They are not used for grading.
          </p>
          <div class="form-group mb-3">
            <div class="custom-file">
              <label class="custom-file-label form-label" for="attachFileInput">Choose file</label><input type="file" name="file" class="custom-file-input form-control" id="attachFileInput">
              
              <small class="form-text text-muted">
                Max file size: 10 MB
              </small>
            </div>
          </div>
          <div class="form-group mb-0 mb-3">
            <input type="hidden" name="__action" value="attach_file">
            <input type="hidden" name="__variant_id" value="112038053">
            <input type="hidden" name="__csrf_token" value="YWE4Nzk1NGQwNGY1MzhkN2Y0ZDNjZWFkZGZmYzQ2OTI4MjRkNDJjOWYwZWIxYmY4ZGI3NTY3Y2Y0MTRiOTM3OA.m56ajfte.eyJ1cmwiOiIvcGwvY291cnNlX2luc3RhbmNlLzE2MjQ0NS9pbnN0YW5jZV9xdWVzdGlvbi80NTEwNTI2MDcvIiwiYXV0aG5fdXNlcl9pZCI6IjQ1MDI5MzkifQ">
            <button type="submit" class="btn btn-primary" disabled="">Attach file</button>
          </div>
        </form>

        <script>
          $(() => {
            // Only enable the "submit" button if a file is selected.
            const form = document.querySelector('form.attach-file-form');
            const fileInput = form.querySelector('#attachFileInput');
            const submitButton = form.querySelector('button[type="submit"]');
            fileInput.addEventListener('change', (e) => {
              submitButton.disabled = fileInput.files.length === 0;
            });
          });
        </script>
      </div>
    </div>
  
                      
    <div>
      <button class="btn btn-xs btn-secondary" type="button" data-toggle="collapse" data-target="#attachTextCollapse" aria-expanded="false" aria-controls="attachTextCollapse" data-bs-target="#attachTextCollapse" data-bs-toggle="collapse">
        Add text note <svg class="svg-inline--fa fa-square-caret-down" aria-hidden="true" focusable="false" data-prefix="far" data-icon="square-caret-down" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M384 432c8.8 0 16-7.2 16-16l0-320c0-8.8-7.2-16-16-16L64 80c-8.8 0-16 7.2-16 16l0 320c0 8.8 7.2 16 16 16l320 0zm64-16c0 35.3-28.7 64-64 64L64 480c-35.3 0-64-28.7-64-64L0 96C0 60.7 28.7 32 64 32l320 0c35.3 0 64 28.7 64 64l0 320zM224 352c-6.7 0-13-2.8-17.6-7.7l-104-112c-6.5-7-8.2-17.2-4.4-25.9s12.5-14.4 22-14.4l208 0c9.5 0 18.2 5.7 22 14.4s2.1 18.9-4.4 25.9l-104 112c-4.5 4.9-10.9 7.7-17.6 7.7z"></path></svg><!-- <i class="far fa-caret-square-down"></i> Font Awesome fontawesome.com -->
      </button>
      <div class="collapse" id="attachTextCollapse">
        <form method="POST" class="attach-text-form">
          <p class="small mt-3">
            Attached personal notes will be saved here for your reference. These notes can be used
            for your own review purposes. They are not used for grading.
          </p>
          <input class="form-control" aria-label="Text filename" name="filename" value="notes.txt">
          <div class="form-group mb-3">
            <textarea class="form-control" rows="5" aria-label="Text contents" name="contents" placeholder="Type or paste text here"></textarea>
          </div>
          <input type="hidden" name="__variant_id" value="112038053">
          <input type="hidden" name="__csrf_token" value="YWE4Nzk1NGQwNGY1MzhkN2Y0ZDNjZWFkZGZmYzQ2OTI4MjRkNDJjOWYwZWIxYmY4ZGI3NTY3Y2Y0MTRiOTM3OA.m56ajfte.eyJ1cmwiOiIvcGwvY291cnNlX2luc3RhbmNlLzE2MjQ0NS9pbnN0YW5jZV9xdWVzdGlvbi80NTEwNTI2MDcvIiwiYXV0aG5fdXNlcl9pZCI6IjQ1MDI5MzkifQ">
          <button class="btn btn-small btn-primary" name="__action" value="attach_text">
            Add note
          </button>
        </form>
      </div>
    </div>
  
                    
            </div>
          
    </div>
  
              
            </div>
          </div>
        </main>
      
    
  </body><grammarly-desktop-integration data-grammarly-shadow-root="true"><template shadowrootmode="open"><style>
      div.grammarly-desktop-integration {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border: 0;
        -moz-user-select: none;
        -webkit-user-select: none;
        -ms-user-select:none;
        user-select:none;
      }

      div.grammarly-desktop-integration:before {
        content: attr(data-content);
      }
    </style><div aria-label="grammarly-integration" role="group" tabindex="-1" class="grammarly-desktop-integration" data-content="{&quot;mode&quot;:&quot;limited&quot;,&quot;isActive&quot;:false,&quot;isUserDisabled&quot;:false}"></div></template></grammarly-desktop-integration></html>